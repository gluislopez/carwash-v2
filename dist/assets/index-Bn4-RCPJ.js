function hd(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function sm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function im(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var fd={exports:{}},Fi={},pd={exports:{}},M={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ws=Symbol.for("react.element"),om=Symbol.for("react.portal"),am=Symbol.for("react.fragment"),lm=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),cm=Symbol.for("react.provider"),dm=Symbol.for("react.context"),hm=Symbol.for("react.forward_ref"),fm=Symbol.for("react.suspense"),pm=Symbol.for("react.memo"),mm=Symbol.for("react.lazy"),wu=Symbol.iterator;function gm(t){return t===null||typeof t!="object"?null:(t=wu&&t[wu]||t["@@iterator"],typeof t=="function"?t:null)}var md={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gd=Object.assign,yd={};function gn(t,e,r){this.props=t,this.context=e,this.refs=yd,this.updater=r||md}gn.prototype.isReactComponent={};gn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vd(){}vd.prototype=gn.prototype;function ll(t,e,r){this.props=t,this.context=e,this.refs=yd,this.updater=r||md}var ul=ll.prototype=new vd;ul.constructor=ll;gd(ul,gn.prototype);ul.isPureReactComponent=!0;var _u=Array.isArray,wd=Object.prototype.hasOwnProperty,cl={current:null},_d={key:!0,ref:!0,__self:!0,__source:!0};function xd(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)wd.call(e,n)&&!_d.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:ws,type:t,key:i,ref:o,props:s,_owner:cl.current}}function ym(t,e){return{$$typeof:ws,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dl(t){return typeof t=="object"&&t!==null&&t.$$typeof===ws}function vm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var xu=/\/+/g;function po(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vm(""+t.key):e.toString(36)}function ei(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ws:case om:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+po(o,0):n,_u(s)?(r="",t!=null&&(r=t.replace(xu,"$&/")+"/"),ei(s,e,r,"",function(c){return c})):s!=null&&(dl(s)&&(s=ym(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(xu,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",_u(t))for(var a=0;a<t.length;a++){i=t[a];var l=n+po(i,a);o+=ei(i,e,r,l,s)}else if(l=gm(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=n+po(i,a++),o+=ei(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cs(t,e,r){if(t==null)return t;var n=[],s=0;return ei(t,n,"","",function(i){return e.call(r,i,s++)}),n}function wm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pe={current:null},ti={transition:null},_m={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ti,ReactCurrentOwner:cl};function Sd(){throw Error("act(...) is not supported in production builds of React.")}M.Children={map:Cs,forEach:function(t,e,r){Cs(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Cs(t,function(){e++}),e},toArray:function(t){return Cs(t,function(e){return e})||[]},only:function(t){if(!dl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};M.Component=gn;M.Fragment=am;M.Profiler=um;M.PureComponent=ll;M.StrictMode=lm;M.Suspense=fm;M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_m;M.act=Sd;M.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=gd({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=cl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)wd.call(e,l)&&!_d.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:ws,type:t.type,key:s,ref:i,props:n,_owner:o}};M.createContext=function(t){return t={$$typeof:dm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cm,_context:t},t.Consumer=t};M.createElement=xd;M.createFactory=function(t){var e=xd.bind(null,t);return e.type=t,e};M.createRef=function(){return{current:null}};M.forwardRef=function(t){return{$$typeof:hm,render:t}};M.isValidElement=dl;M.lazy=function(t){return{$$typeof:mm,_payload:{_status:-1,_result:t},_init:wm}};M.memo=function(t,e){return{$$typeof:pm,type:t,compare:e===void 0?null:e}};M.startTransition=function(t){var e=ti.transition;ti.transition={};try{t()}finally{ti.transition=e}};M.unstable_act=Sd;M.useCallback=function(t,e){return Pe.current.useCallback(t,e)};M.useContext=function(t){return Pe.current.useContext(t)};M.useDebugValue=function(){};M.useDeferredValue=function(t){return Pe.current.useDeferredValue(t)};M.useEffect=function(t,e){return Pe.current.useEffect(t,e)};M.useId=function(){return Pe.current.useId()};M.useImperativeHandle=function(t,e,r){return Pe.current.useImperativeHandle(t,e,r)};M.useInsertionEffect=function(t,e){return Pe.current.useInsertionEffect(t,e)};M.useLayoutEffect=function(t,e){return Pe.current.useLayoutEffect(t,e)};M.useMemo=function(t,e){return Pe.current.useMemo(t,e)};M.useReducer=function(t,e,r){return Pe.current.useReducer(t,e,r)};M.useRef=function(t){return Pe.current.useRef(t)};M.useState=function(t){return Pe.current.useState(t)};M.useSyncExternalStore=function(t,e,r){return Pe.current.useSyncExternalStore(t,e,r)};M.useTransition=function(){return Pe.current.useTransition()};M.version="18.3.1";pd.exports=M;var b=pd.exports;const bd=sm(b),xm=hd({__proto__:null,default:bd},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm=b,bm=Symbol.for("react.element"),km=Symbol.for("react.fragment"),jm=Object.prototype.hasOwnProperty,Em=Sm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cm={key:!0,ref:!0,__self:!0,__source:!0};function kd(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)jm.call(e,n)&&!Cm.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:bm,type:t,key:i,ref:o,props:s,_owner:Em.current}}Fi.Fragment=km;Fi.jsx=kd;Fi.jsxs=kd;fd.exports=Fi;var u=fd.exports,Qo={},jd={exports:{}},qe={},Ed={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,U){var k=P.length;P.push(U);e:for(;0<k;){var O=k-1>>>1,A=P[O];if(0<s(A,U))P[O]=U,P[k]=A,k=O;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var U=P[0],k=P.pop();if(k!==U){P[0]=k;e:for(var O=0,A=P.length,pe=A>>>1;O<pe;){var ye=2*(O+1)-1,K=P[ye],oe=ye+1,Rt=P[oe];if(0>s(K,k))oe<A&&0>s(Rt,K)?(P[O]=Rt,P[oe]=k,O=oe):(P[O]=K,P[ye]=k,O=ye);else if(oe<A&&0>s(Rt,k))P[O]=Rt,P[oe]=k,O=oe;else break e}}return U}function s(P,U){var k=P.sortIndex-U.sortIndex;return k!==0?k:P.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var U=r(c);U!==null;){if(U.callback===null)n(c);else if(U.startTime<=P)n(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=r(c)}}function _(P){if(w=!1,v(P),!y)if(r(l)!==null)y=!0,yt(S);else{var U=r(c);U!==null&&Ze(_,U.startTime-P)}}function S(P,U){y=!1,w&&(w=!1,p(R),R=-1),m=!0;var k=f;try{for(v(U),h=r(l);h!==null&&(!(h.expirationTime>U)||P&&!W());){var O=h.callback;if(typeof O=="function"){h.callback=null,f=h.priorityLevel;var A=O(h.expirationTime<=U);U=t.unstable_now(),typeof A=="function"?h.callback=A:h===r(l)&&n(l),v(U)}else n(l);h=r(l)}if(h!==null)var pe=!0;else{var ye=r(c);ye!==null&&Ze(_,ye.startTime-U),pe=!1}return pe}finally{h=null,f=k,m=!1}}var j=!1,C=null,R=-1,z=5,B=-1;function W(){return!(t.unstable_now()-B<z)}function Ce(){if(C!==null){var P=t.unstable_now();B=P;var U=!0;try{U=C(!0,P)}finally{U?dt():(j=!1,C=null)}}else j=!1}var dt;if(typeof g=="function")dt=function(){g(Ce)};else if(typeof MessageChannel<"u"){var Tr=new MessageChannel,Ot=Tr.port2;Tr.port1.onmessage=Ce,dt=function(){Ot.postMessage(null)}}else dt=function(){x(Ce,0)};function yt(P){C=P,j||(j=!0,dt())}function Ze(P,U){R=x(function(){P(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,yt(S))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var k=f;f=U;try{return P()}finally{f=k}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,U){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var k=f;f=P;try{return U()}finally{f=k}},t.unstable_scheduleCallback=function(P,U,k){var O=t.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?O+k:O):k=O,P){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=k+A,P={id:d++,callback:U,priorityLevel:P,startTime:k,expirationTime:A,sortIndex:-1},k>O?(P.sortIndex=k,e(c,P),r(l)===null&&P===r(c)&&(w?(p(R),R=-1):w=!0,Ze(_,k-O))):(P.sortIndex=A,e(l,P),y||m||(y=!0,yt(S))),P},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(P){var U=f;return function(){var k=f;f=U;try{return P.apply(this,arguments)}finally{f=k}}}})(Cd);Ed.exports=Cd;var Tm=Ed.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om=b,Ve=Tm;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Td=new Set,Qn={};function jr(t,e){an(t,e),an(t+"Capture",e)}function an(t,e){for(Qn[t]=e,t=0;t<e.length;t++)Td.add(e[t])}var kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yo=Object.prototype.hasOwnProperty,Rm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Su={},bu={};function Pm(t){return Yo.call(bu,t)?!0:Yo.call(Su,t)?!1:Rm.test(t)?bu[t]=!0:(Su[t]=!0,!1)}function Nm(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Im(t,e,r,n){if(e===null||typeof e>"u"||Nm(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ne(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Se[t]=new Ne(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Se[e]=new Ne(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Se[t]=new Ne(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Se[t]=new Ne(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Se[t]=new Ne(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Se[t]=new Ne(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Se[t]=new Ne(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Se[t]=new Ne(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Se[t]=new Ne(t,5,!1,t.toLowerCase(),null,!1,!1)});var hl=/[\-:]([a-z])/g;function fl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hl,fl);Se[e]=new Ne(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hl,fl);Se[e]=new Ne(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hl,fl);Se[e]=new Ne(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Se[t]=new Ne(t,1,!1,t.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Se[t]=new Ne(t,1,!1,t.toLowerCase(),null,!0,!0)});function pl(t,e,r,n){var s=Se.hasOwnProperty(e)?Se[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Im(e,r,s,n)&&(r=null),n||s===null?Pm(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Tt=Om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ts=Symbol.for("react.element"),Mr=Symbol.for("react.portal"),Fr=Symbol.for("react.fragment"),ml=Symbol.for("react.strict_mode"),Xo=Symbol.for("react.profiler"),Od=Symbol.for("react.provider"),Rd=Symbol.for("react.context"),gl=Symbol.for("react.forward_ref"),Zo=Symbol.for("react.suspense"),ea=Symbol.for("react.suspense_list"),yl=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),Pd=Symbol.for("react.offscreen"),ku=Symbol.iterator;function En(t){return t===null||typeof t!="object"?null:(t=ku&&t[ku]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,mo;function An(t){if(mo===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);mo=e&&e[1]||""}return`
`+mo+t}var go=!1;function yo(t,e){if(!t||go)return"";go=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{go=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?An(t):""}function Am(t){switch(t.tag){case 5:return An(t.type);case 16:return An("Lazy");case 13:return An("Suspense");case 19:return An("SuspenseList");case 0:case 2:case 15:return t=yo(t.type,!1),t;case 11:return t=yo(t.type.render,!1),t;case 1:return t=yo(t.type,!0),t;default:return""}}function ta(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fr:return"Fragment";case Mr:return"Portal";case Xo:return"Profiler";case ml:return"StrictMode";case Zo:return"Suspense";case ea:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rd:return(t.displayName||"Context")+".Consumer";case Od:return(t._context.displayName||"Context")+".Provider";case gl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yl:return e=t.displayName||null,e!==null?e:ta(t.type)||"Memo";case It:e=t._payload,t=t._init;try{return ta(t(e))}catch{}}return null}function $m(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ta(e);case 8:return e===ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Nd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Dm(t){var e=Nd(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Os(t){t._valueTracker||(t._valueTracker=Dm(t))}function Id(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Nd(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function hi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ra(t,e){var r=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ju(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Yt(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ad(t,e){e=e.checked,e!=null&&pl(t,"checked",e,!1)}function na(t,e){Ad(t,e);var r=Yt(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sa(t,e.type,r):e.hasOwnProperty("defaultValue")&&sa(t,e.type,Yt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eu(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function sa(t,e,r){(e!=="number"||hi(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var $n=Array.isArray;function Zr(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Yt(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ia(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cu(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(T(92));if($n(r)){if(1<r.length)throw Error(T(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Yt(r)}}function $d(t,e){var r=Yt(e.value),n=Yt(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Tu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rs,Ld=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rs=Rs||document.createElement("div"),Rs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lm=["Webkit","ms","Moz","O"];Object.keys(Bn).forEach(function(t){Lm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bn[e]=Bn[t]})});function Ud(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Bn.hasOwnProperty(t)&&Bn[t]?(""+e).trim():e+"px"}function Bd(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ud(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Um=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aa(t,e){if(e){if(Um[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function la(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ua=null;function vl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ca=null,en=null,tn=null;function Ou(t){if(t=Ss(t)){if(typeof ca!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Ki(e),ca(t.stateNode,t.type,e))}}function zd(t){en?tn?tn.push(t):tn=[t]:en=t}function Md(){if(en){var t=en,e=tn;if(tn=en=null,Ou(t),e)for(t=0;t<e.length;t++)Ou(e[t])}}function Fd(t,e){return t(e)}function Wd(){}var vo=!1;function Vd(t,e,r){if(vo)return t(e,r);vo=!0;try{return Fd(t,e,r)}finally{vo=!1,(en!==null||tn!==null)&&(Wd(),Md())}}function Xn(t,e){var r=t.stateNode;if(r===null)return null;var n=Ki(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(T(231,e,typeof r));return r}var da=!1;if(kt)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){da=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{da=!1}function Bm(t,e,r,n,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var zn=!1,fi=null,pi=!1,ha=null,zm={onError:function(t){zn=!0,fi=t}};function Mm(t,e,r,n,s,i,o,a,l){zn=!1,fi=null,Bm.apply(zm,arguments)}function Fm(t,e,r,n,s,i,o,a,l){if(Mm.apply(this,arguments),zn){if(zn){var c=fi;zn=!1,fi=null}else throw Error(T(198));pi||(pi=!0,ha=c)}}function Er(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function qd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ru(t){if(Er(t)!==t)throw Error(T(188))}function Wm(t){var e=t.alternate;if(!e){if(e=Er(t),e===null)throw Error(T(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ru(s),t;if(i===n)return Ru(s),e;i=i.sibling}throw Error(T(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(r.alternate!==n)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?t:e}function Hd(t){return t=Wm(t),t!==null?Kd(t):null}function Kd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kd(t);if(e!==null)return e;t=t.sibling}return null}var Gd=Ve.unstable_scheduleCallback,Pu=Ve.unstable_cancelCallback,Vm=Ve.unstable_shouldYield,qm=Ve.unstable_requestPaint,ae=Ve.unstable_now,Hm=Ve.unstable_getCurrentPriorityLevel,wl=Ve.unstable_ImmediatePriority,Jd=Ve.unstable_UserBlockingPriority,mi=Ve.unstable_NormalPriority,Km=Ve.unstable_LowPriority,Qd=Ve.unstable_IdlePriority,Wi=null,mt=null;function Gm(t){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Wi,t,void 0,(t.current.flags&128)===128)}catch{}}var lt=Math.clz32?Math.clz32:Ym,Jm=Math.log,Qm=Math.LN2;function Ym(t){return t>>>=0,t===0?32:31-(Jm(t)/Qm|0)|0}var Ps=64,Ns=4194304;function Dn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gi(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=Dn(a):(i&=o,i!==0&&(n=Dn(i)))}else o=r&~s,o!==0?n=Dn(o):i!==0&&(n=Dn(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-lt(e),s=1<<r,n|=t[r],e&=~s;return n}function Xm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zm(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-lt(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=Xm(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function fa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yd(){var t=Ps;return Ps<<=1,!(Ps&4194240)&&(Ps=64),t}function wo(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function _s(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-lt(e),t[e]=r}function eg(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-lt(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function _l(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-lt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var H=0;function Xd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zd,xl,eh,th,rh,pa=!1,Is=[],Mt=null,Ft=null,Wt=null,Zn=new Map,es=new Map,$t=[],tg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nu(t,e){switch(t){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":Zn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(e.pointerId)}}function Tn(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ss(e),e!==null&&xl(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function rg(t,e,r,n,s){switch(e){case"focusin":return Mt=Tn(Mt,t,e,r,n,s),!0;case"dragenter":return Ft=Tn(Ft,t,e,r,n,s),!0;case"mouseover":return Wt=Tn(Wt,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Zn.set(i,Tn(Zn.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,es.set(i,Tn(es.get(i)||null,t,e,r,n,s)),!0}return!1}function nh(t){var e=fr(t.target);if(e!==null){var r=Er(e);if(r!==null){if(e=r.tag,e===13){if(e=qd(r),e!==null){t.blockedOn=e,rh(t.priority,function(){eh(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ri(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=ma(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);ua=n,r.target.dispatchEvent(n),ua=null}else return e=Ss(r),e!==null&&xl(e),t.blockedOn=r,!1;e.shift()}return!0}function Iu(t,e,r){ri(t)&&r.delete(e)}function ng(){pa=!1,Mt!==null&&ri(Mt)&&(Mt=null),Ft!==null&&ri(Ft)&&(Ft=null),Wt!==null&&ri(Wt)&&(Wt=null),Zn.forEach(Iu),es.forEach(Iu)}function On(t,e){t.blockedOn===e&&(t.blockedOn=null,pa||(pa=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,ng)))}function ts(t){function e(s){return On(s,t)}if(0<Is.length){On(Is[0],t);for(var r=1;r<Is.length;r++){var n=Is[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Mt!==null&&On(Mt,t),Ft!==null&&On(Ft,t),Wt!==null&&On(Wt,t),Zn.forEach(e),es.forEach(e),r=0;r<$t.length;r++)n=$t[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<$t.length&&(r=$t[0],r.blockedOn===null);)nh(r),r.blockedOn===null&&$t.shift()}var rn=Tt.ReactCurrentBatchConfig,yi=!0;function sg(t,e,r,n){var s=H,i=rn.transition;rn.transition=null;try{H=1,Sl(t,e,r,n)}finally{H=s,rn.transition=i}}function ig(t,e,r,n){var s=H,i=rn.transition;rn.transition=null;try{H=4,Sl(t,e,r,n)}finally{H=s,rn.transition=i}}function Sl(t,e,r,n){if(yi){var s=ma(t,e,r,n);if(s===null)Oo(t,e,n,vi,r),Nu(t,n);else if(rg(s,t,e,r,n))n.stopPropagation();else if(Nu(t,n),e&4&&-1<tg.indexOf(t)){for(;s!==null;){var i=Ss(s);if(i!==null&&Zd(i),i=ma(t,e,r,n),i===null&&Oo(t,e,n,vi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Oo(t,e,n,null,r)}}var vi=null;function ma(t,e,r,n){if(vi=null,t=vl(n),t=fr(t),t!==null)if(e=Er(t),e===null)t=null;else if(r=e.tag,r===13){if(t=qd(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vi=t,null}function sh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hm()){case wl:return 1;case Jd:return 4;case mi:case Km:return 16;case Qd:return 536870912;default:return 16}default:return 16}}var Ut=null,bl=null,ni=null;function ih(){if(ni)return ni;var t,e=bl,r=e.length,n,s="value"in Ut?Ut.value:Ut.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return ni=s.slice(t,1<n?1-n:void 0)}function si(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function As(){return!0}function Au(){return!1}function He(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?As:Au,this.isPropagationStopped=Au,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),e}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kl=He(yn),xs=ne({},yn,{view:0,detail:0}),og=He(xs),_o,xo,Rn,Vi=ne({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rn&&(Rn&&t.type==="mousemove"?(_o=t.screenX-Rn.screenX,xo=t.screenY-Rn.screenY):xo=_o=0,Rn=t),_o)},movementY:function(t){return"movementY"in t?t.movementY:xo}}),$u=He(Vi),ag=ne({},Vi,{dataTransfer:0}),lg=He(ag),ug=ne({},xs,{relatedTarget:0}),So=He(ug),cg=ne({},yn,{animationName:0,elapsedTime:0,pseudoElement:0}),dg=He(cg),hg=ne({},yn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fg=He(hg),pg=ne({},yn,{data:0}),Du=He(pg),mg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yg[t])?!!e[t]:!1}function jl(){return vg}var wg=ne({},xs,{key:function(t){if(t.key){var e=mg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=si(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jl,charCode:function(t){return t.type==="keypress"?si(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?si(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_g=He(wg),xg=ne({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lu=He(xg),Sg=ne({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jl}),bg=He(Sg),kg=ne({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),jg=He(kg),Eg=ne({},Vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cg=He(Eg),Tg=[9,13,27,32],El=kt&&"CompositionEvent"in window,Mn=null;kt&&"documentMode"in document&&(Mn=document.documentMode);var Og=kt&&"TextEvent"in window&&!Mn,oh=kt&&(!El||Mn&&8<Mn&&11>=Mn),Uu=" ",Bu=!1;function ah(t,e){switch(t){case"keyup":return Tg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wr=!1;function Rg(t,e){switch(t){case"compositionend":return lh(e);case"keypress":return e.which!==32?null:(Bu=!0,Uu);case"textInput":return t=e.data,t===Uu&&Bu?null:t;default:return null}}function Pg(t,e){if(Wr)return t==="compositionend"||!El&&ah(t,e)?(t=ih(),ni=bl=Ut=null,Wr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oh&&e.locale!=="ko"?null:e.data;default:return null}}var Ng={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ng[t.type]:e==="textarea"}function uh(t,e,r,n){zd(n),e=wi(e,"onChange"),0<e.length&&(r=new kl("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Fn=null,rs=null;function Ig(t){_h(t,0)}function qi(t){var e=Hr(t);if(Id(e))return t}function Ag(t,e){if(t==="change")return e}var ch=!1;if(kt){var bo;if(kt){var ko="oninput"in document;if(!ko){var Mu=document.createElement("div");Mu.setAttribute("oninput","return;"),ko=typeof Mu.oninput=="function"}bo=ko}else bo=!1;ch=bo&&(!document.documentMode||9<document.documentMode)}function Fu(){Fn&&(Fn.detachEvent("onpropertychange",dh),rs=Fn=null)}function dh(t){if(t.propertyName==="value"&&qi(rs)){var e=[];uh(e,rs,t,vl(t)),Vd(Ig,e)}}function $g(t,e,r){t==="focusin"?(Fu(),Fn=e,rs=r,Fn.attachEvent("onpropertychange",dh)):t==="focusout"&&Fu()}function Dg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qi(rs)}function Lg(t,e){if(t==="click")return qi(e)}function Ug(t,e){if(t==="input"||t==="change")return qi(e)}function Bg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ct=typeof Object.is=="function"?Object.is:Bg;function ns(t,e){if(ct(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Yo.call(e,s)||!ct(t[s],e[s]))return!1}return!0}function Wu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vu(t,e){var r=Wu(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Wu(r)}}function hh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fh(){for(var t=window,e=hi();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=hi(t.document)}return e}function Cl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zg(t){var e=fh(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&hh(r.ownerDocument.documentElement,r)){if(n!==null&&Cl(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Vu(r,i);var o=Vu(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mg=kt&&"documentMode"in document&&11>=document.documentMode,Vr=null,ga=null,Wn=null,ya=!1;function qu(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ya||Vr==null||Vr!==hi(n)||(n=Vr,"selectionStart"in n&&Cl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Wn&&ns(Wn,n)||(Wn=n,n=wi(ga,"onSelect"),0<n.length&&(e=new kl("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Vr)))}function $s(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var qr={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionend:$s("Transition","TransitionEnd")},jo={},ph={};kt&&(ph=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function Hi(t){if(jo[t])return jo[t];if(!qr[t])return t;var e=qr[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in ph)return jo[t]=e[r];return t}var mh=Hi("animationend"),gh=Hi("animationiteration"),yh=Hi("animationstart"),vh=Hi("transitionend"),wh=new Map,Hu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zt(t,e){wh.set(t,e),jr(e,[t])}for(var Eo=0;Eo<Hu.length;Eo++){var Co=Hu[Eo],Fg=Co.toLowerCase(),Wg=Co[0].toUpperCase()+Co.slice(1);Zt(Fg,"on"+Wg)}Zt(mh,"onAnimationEnd");Zt(gh,"onAnimationIteration");Zt(yh,"onAnimationStart");Zt("dblclick","onDoubleClick");Zt("focusin","onFocus");Zt("focusout","onBlur");Zt(vh,"onTransitionEnd");an("onMouseEnter",["mouseout","mouseover"]);an("onMouseLeave",["mouseout","mouseover"]);an("onPointerEnter",["pointerout","pointerover"]);an("onPointerLeave",["pointerout","pointerover"]);jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Ku(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Fm(n,e,void 0,t),t.currentTarget=null}function _h(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ku(s,a,c),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ku(s,a,c),i=l}}}if(pi)throw t=ha,pi=!1,ha=null,t}function Y(t,e){var r=e[Sa];r===void 0&&(r=e[Sa]=new Set);var n=t+"__bubble";r.has(n)||(xh(e,t,2,!1),r.add(n))}function To(t,e,r){var n=0;e&&(n|=4),xh(r,t,n,e)}var Ds="_reactListening"+Math.random().toString(36).slice(2);function ss(t){if(!t[Ds]){t[Ds]=!0,Td.forEach(function(r){r!=="selectionchange"&&(Vg.has(r)||To(r,!1,t),To(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ds]||(e[Ds]=!0,To("selectionchange",!1,e))}}function xh(t,e,r,n){switch(sh(e)){case 1:var s=sg;break;case 4:s=ig;break;default:s=Sl}r=s.bind(null,e,r,t),s=void 0,!da||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Oo(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=fr(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}Vd(function(){var c=i,d=vl(r),h=[];e:{var f=wh.get(t);if(f!==void 0){var m=kl,y=t;switch(t){case"keypress":if(si(r)===0)break e;case"keydown":case"keyup":m=_g;break;case"focusin":y="focus",m=So;break;case"focusout":y="blur",m=So;break;case"beforeblur":case"afterblur":m=So;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=$u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=bg;break;case mh:case gh:case yh:m=dg;break;case vh:m=jg;break;case"scroll":m=og;break;case"wheel":m=Cg;break;case"copy":case"cut":case"paste":m=fg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Lu}var w=(e&4)!==0,x=!w&&t==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var g=c,v;g!==null;){v=g;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,p!==null&&(_=Xn(g,p),_!=null&&w.push(is(g,_,v)))),x)break;g=g.return}0<w.length&&(f=new m(f,y,null,r,d),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==ua&&(y=r.relatedTarget||r.fromElement)&&(fr(y)||y[jt]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=c,y=y?fr(y):null,y!==null&&(x=Er(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(w=$u,_="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=Lu,_="onPointerLeave",p="onPointerEnter",g="pointer"),x=m==null?f:Hr(m),v=y==null?f:Hr(y),f=new w(_,g+"leave",m,r,d),f.target=x,f.relatedTarget=v,_=null,fr(d)===c&&(w=new w(p,g+"enter",y,r,d),w.target=v,w.relatedTarget=x,_=w),x=_,m&&y)t:{for(w=m,p=y,g=0,v=w;v;v=Nr(v))g++;for(v=0,_=p;_;_=Nr(_))v++;for(;0<g-v;)w=Nr(w),g--;for(;0<v-g;)p=Nr(p),v--;for(;g--;){if(w===p||p!==null&&w===p.alternate)break t;w=Nr(w),p=Nr(p)}w=null}else w=null;m!==null&&Gu(h,f,m,w,!1),y!==null&&x!==null&&Gu(h,x,y,w,!0)}}e:{if(f=c?Hr(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=Ag;else if(zu(f))if(ch)S=Ug;else{S=Dg;var j=$g}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Lg);if(S&&(S=S(t,c))){uh(h,S,r,d);break e}j&&j(t,f,c),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&sa(f,"number",f.value)}switch(j=c?Hr(c):window,t){case"focusin":(zu(j)||j.contentEditable==="true")&&(Vr=j,ga=c,Wn=null);break;case"focusout":Wn=ga=Vr=null;break;case"mousedown":ya=!0;break;case"contextmenu":case"mouseup":case"dragend":ya=!1,qu(h,r,d);break;case"selectionchange":if(Mg)break;case"keydown":case"keyup":qu(h,r,d)}var C;if(El)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Wr?ah(t,r)&&(R="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(oh&&r.locale!=="ko"&&(Wr||R!=="onCompositionStart"?R==="onCompositionEnd"&&Wr&&(C=ih()):(Ut=d,bl="value"in Ut?Ut.value:Ut.textContent,Wr=!0)),j=wi(c,R),0<j.length&&(R=new Du(R,t,null,r,d),h.push({event:R,listeners:j}),C?R.data=C:(C=lh(r),C!==null&&(R.data=C)))),(C=Og?Rg(t,r):Pg(t,r))&&(c=wi(c,"onBeforeInput"),0<c.length&&(d=new Du("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=C))}_h(h,e)})}function is(t,e,r){return{instance:t,listener:e,currentTarget:r}}function wi(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Xn(t,r),i!=null&&n.unshift(is(t,i,s)),i=Xn(t,e),i!=null&&n.push(is(t,i,s))),t=t.return}return n}function Nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gu(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,s?(l=Xn(r,i),l!=null&&o.unshift(is(r,l,a))):s||(l=Xn(r,i),l!=null&&o.push(is(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var qg=/\r\n?/g,Hg=/\u0000|\uFFFD/g;function Ju(t){return(typeof t=="string"?t:""+t).replace(qg,`
`).replace(Hg,"")}function Ls(t,e,r){if(e=Ju(e),Ju(t)!==e&&r)throw Error(T(425))}function _i(){}var va=null,wa=null;function _a(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xa=typeof setTimeout=="function"?setTimeout:void 0,Kg=typeof clearTimeout=="function"?clearTimeout:void 0,Qu=typeof Promise=="function"?Promise:void 0,Gg=typeof queueMicrotask=="function"?queueMicrotask:typeof Qu<"u"?function(t){return Qu.resolve(null).then(t).catch(Jg)}:xa;function Jg(t){setTimeout(function(){throw t})}function Ro(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),ts(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ts(e)}function Vt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var vn=Math.random().toString(36).slice(2),pt="__reactFiber$"+vn,os="__reactProps$"+vn,jt="__reactContainer$"+vn,Sa="__reactEvents$"+vn,Qg="__reactListeners$"+vn,Yg="__reactHandles$"+vn;function fr(t){var e=t[pt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[jt]||r[pt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Yu(t);t!==null;){if(r=t[pt])return r;t=Yu(t)}return e}t=r,r=t.parentNode}return null}function Ss(t){return t=t[pt]||t[jt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Ki(t){return t[os]||null}var ba=[],Kr=-1;function er(t){return{current:t}}function X(t){0>Kr||(t.current=ba[Kr],ba[Kr]=null,Kr--)}function Q(t,e){Kr++,ba[Kr]=t.current,t.current=e}var Xt={},Ee=er(Xt),$e=er(!1),_r=Xt;function ln(t,e){var r=t.type.contextTypes;if(!r)return Xt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function De(t){return t=t.childContextTypes,t!=null}function xi(){X($e),X(Ee)}function Xu(t,e,r){if(Ee.current!==Xt)throw Error(T(168));Q(Ee,e),Q($e,r)}function Sh(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(T(108,$m(t)||"Unknown",s));return ne({},r,n)}function Si(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xt,_r=Ee.current,Q(Ee,t),Q($e,$e.current),!0}function Zu(t,e,r){var n=t.stateNode;if(!n)throw Error(T(169));r?(t=Sh(t,e,_r),n.__reactInternalMemoizedMergedChildContext=t,X($e),X(Ee),Q(Ee,t)):X($e),Q($e,r)}var _t=null,Gi=!1,Po=!1;function bh(t){_t===null?_t=[t]:_t.push(t)}function Xg(t){Gi=!0,bh(t)}function tr(){if(!Po&&_t!==null){Po=!0;var t=0,e=H;try{var r=_t;for(H=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}_t=null,Gi=!1}catch(s){throw _t!==null&&(_t=_t.slice(t+1)),Gd(wl,tr),s}finally{H=e,Po=!1}}return null}var Gr=[],Jr=0,bi=null,ki=0,Ke=[],Ge=0,xr=null,xt=1,St="";function ar(t,e){Gr[Jr++]=ki,Gr[Jr++]=bi,bi=t,ki=e}function kh(t,e,r){Ke[Ge++]=xt,Ke[Ge++]=St,Ke[Ge++]=xr,xr=t;var n=xt;t=St;var s=32-lt(n)-1;n&=~(1<<s),r+=1;var i=32-lt(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,xt=1<<32-lt(e)+s|r<<s|n,St=i+t}else xt=1<<i|r<<s|n,St=t}function Tl(t){t.return!==null&&(ar(t,1),kh(t,1,0))}function Ol(t){for(;t===bi;)bi=Gr[--Jr],Gr[Jr]=null,ki=Gr[--Jr],Gr[Jr]=null;for(;t===xr;)xr=Ke[--Ge],Ke[Ge]=null,St=Ke[--Ge],Ke[Ge]=null,xt=Ke[--Ge],Ke[Ge]=null}var We=null,Fe=null,Z=!1,at=null;function jh(t,e){var r=Je(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ec(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,We=t,Fe=Vt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,We=t,Fe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=xr!==null?{id:xt,overflow:St}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Je(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,We=t,Fe=null,!0):!1;default:return!1}}function ka(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ja(t){if(Z){var e=Fe;if(e){var r=e;if(!ec(t,e)){if(ka(t))throw Error(T(418));e=Vt(r.nextSibling);var n=We;e&&ec(t,e)?jh(n,r):(t.flags=t.flags&-4097|2,Z=!1,We=t)}}else{if(ka(t))throw Error(T(418));t.flags=t.flags&-4097|2,Z=!1,We=t}}}function tc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;We=t}function Us(t){if(t!==We)return!1;if(!Z)return tc(t),Z=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_a(t.type,t.memoizedProps)),e&&(e=Fe)){if(ka(t))throw Eh(),Error(T(418));for(;e;)jh(t,e),e=Vt(e.nextSibling)}if(tc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Fe=Vt(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Fe=null}}else Fe=We?Vt(t.stateNode.nextSibling):null;return!0}function Eh(){for(var t=Fe;t;)t=Vt(t.nextSibling)}function un(){Fe=We=null,Z=!1}function Rl(t){at===null?at=[t]:at.push(t)}var Zg=Tt.ReactCurrentBatchConfig;function Pn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var n=r.stateNode}if(!n)throw Error(T(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,t))}return t}function Bs(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rc(t){var e=t._init;return e(t._payload)}function Ch(t){function e(p,g){if(t){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function r(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function n(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function s(p,g){return p=Gt(p,g),p.index=0,p.sibling=null,p}function i(p,g,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,g,v,_){return g===null||g.tag!==6?(g=Uo(v,p.mode,_),g.return=p,g):(g=s(g,v),g.return=p,g)}function l(p,g,v,_){var S=v.type;return S===Fr?d(p,g,v.props.children,_,v.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===It&&rc(S)===g.type)?(_=s(g,v.props),_.ref=Pn(p,g,v),_.return=p,_):(_=di(v.type,v.key,v.props,null,p.mode,_),_.ref=Pn(p,g,v),_.return=p,_)}function c(p,g,v,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Bo(v,p.mode,_),g.return=p,g):(g=s(g,v.children||[]),g.return=p,g)}function d(p,g,v,_,S){return g===null||g.tag!==7?(g=wr(v,p.mode,_,S),g.return=p,g):(g=s(g,v),g.return=p,g)}function h(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Uo(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ts:return v=di(g.type,g.key,g.props,null,p.mode,v),v.ref=Pn(p,null,g),v.return=p,v;case Mr:return g=Bo(g,p.mode,v),g.return=p,g;case It:var _=g._init;return h(p,_(g._payload),v)}if($n(g)||En(g))return g=wr(g,p.mode,v,null),g.return=p,g;Bs(p,g)}return null}function f(p,g,v,_){var S=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(p,g,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ts:return v.key===S?l(p,g,v,_):null;case Mr:return v.key===S?c(p,g,v,_):null;case It:return S=v._init,f(p,g,S(v._payload),_)}if($n(v)||En(v))return S!==null?null:d(p,g,v,_,null);Bs(p,v)}return null}function m(p,g,v,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(v)||null,a(g,p,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ts:return p=p.get(_.key===null?v:_.key)||null,l(g,p,_,S);case Mr:return p=p.get(_.key===null?v:_.key)||null,c(g,p,_,S);case It:var j=_._init;return m(p,g,v,j(_._payload),S)}if($n(_)||En(_))return p=p.get(v)||null,d(g,p,_,S,null);Bs(g,_)}return null}function y(p,g,v,_){for(var S=null,j=null,C=g,R=g=0,z=null;C!==null&&R<v.length;R++){C.index>R?(z=C,C=null):z=C.sibling;var B=f(p,C,v[R],_);if(B===null){C===null&&(C=z);break}t&&C&&B.alternate===null&&e(p,C),g=i(B,g,R),j===null?S=B:j.sibling=B,j=B,C=z}if(R===v.length)return r(p,C),Z&&ar(p,R),S;if(C===null){for(;R<v.length;R++)C=h(p,v[R],_),C!==null&&(g=i(C,g,R),j===null?S=C:j.sibling=C,j=C);return Z&&ar(p,R),S}for(C=n(p,C);R<v.length;R++)z=m(C,p,R,v[R],_),z!==null&&(t&&z.alternate!==null&&C.delete(z.key===null?R:z.key),g=i(z,g,R),j===null?S=z:j.sibling=z,j=z);return t&&C.forEach(function(W){return e(p,W)}),Z&&ar(p,R),S}function w(p,g,v,_){var S=En(v);if(typeof S!="function")throw Error(T(150));if(v=S.call(v),v==null)throw Error(T(151));for(var j=S=null,C=g,R=g=0,z=null,B=v.next();C!==null&&!B.done;R++,B=v.next()){C.index>R?(z=C,C=null):z=C.sibling;var W=f(p,C,B.value,_);if(W===null){C===null&&(C=z);break}t&&C&&W.alternate===null&&e(p,C),g=i(W,g,R),j===null?S=W:j.sibling=W,j=W,C=z}if(B.done)return r(p,C),Z&&ar(p,R),S;if(C===null){for(;!B.done;R++,B=v.next())B=h(p,B.value,_),B!==null&&(g=i(B,g,R),j===null?S=B:j.sibling=B,j=B);return Z&&ar(p,R),S}for(C=n(p,C);!B.done;R++,B=v.next())B=m(C,p,R,B.value,_),B!==null&&(t&&B.alternate!==null&&C.delete(B.key===null?R:B.key),g=i(B,g,R),j===null?S=B:j.sibling=B,j=B);return t&&C.forEach(function(Ce){return e(p,Ce)}),Z&&ar(p,R),S}function x(p,g,v,_){if(typeof v=="object"&&v!==null&&v.type===Fr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ts:e:{for(var S=v.key,j=g;j!==null;){if(j.key===S){if(S=v.type,S===Fr){if(j.tag===7){r(p,j.sibling),g=s(j,v.props.children),g.return=p,p=g;break e}}else if(j.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===It&&rc(S)===j.type){r(p,j.sibling),g=s(j,v.props),g.ref=Pn(p,j,v),g.return=p,p=g;break e}r(p,j);break}else e(p,j);j=j.sibling}v.type===Fr?(g=wr(v.props.children,p.mode,_,v.key),g.return=p,p=g):(_=di(v.type,v.key,v.props,null,p.mode,_),_.ref=Pn(p,g,v),_.return=p,p=_)}return o(p);case Mr:e:{for(j=v.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){r(p,g.sibling),g=s(g,v.children||[]),g.return=p,p=g;break e}else{r(p,g);break}else e(p,g);g=g.sibling}g=Bo(v,p.mode,_),g.return=p,p=g}return o(p);case It:return j=v._init,x(p,g,j(v._payload),_)}if($n(v))return y(p,g,v,_);if(En(v))return w(p,g,v,_);Bs(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(r(p,g.sibling),g=s(g,v),g.return=p,p=g):(r(p,g),g=Uo(v,p.mode,_),g.return=p,p=g),o(p)):r(p,g)}return x}var cn=Ch(!0),Th=Ch(!1),ji=er(null),Ei=null,Qr=null,Pl=null;function Nl(){Pl=Qr=Ei=null}function Il(t){var e=ji.current;X(ji),t._currentValue=e}function Ea(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function nn(t,e){Ei=t,Pl=Qr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ae=!0),t.firstContext=null)}function Ye(t){var e=t._currentValue;if(Pl!==t)if(t={context:t,memoizedValue:e,next:null},Qr===null){if(Ei===null)throw Error(T(308));Qr=t,Ei.dependencies={lanes:0,firstContext:t}}else Qr=Qr.next=t;return e}var pr=null;function Al(t){pr===null?pr=[t]:pr.push(t)}function Oh(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Al(e)):(r.next=s.next,s.next=r),e.interleaved=r,Et(t,n)}function Et(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var At=!1;function $l(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qt(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,F&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Et(t,r)}return s=n.interleaved,s===null?(e.next=e,Al(n)):(e.next=s.next,s.next=e),n.interleaved=e,Et(t,r)}function ii(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,_l(t,r)}}function nc(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ci(t,e,r,n){var s=t.updateQueue;At=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(f=e,m=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=ne({},h,f);break e;case 2:At=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);br|=o,t.lanes=o,t.memoizedState=h}}function sc(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(T(191,s));s.call(n)}}}var bs={},gt=er(bs),as=er(bs),ls=er(bs);function mr(t){if(t===bs)throw Error(T(174));return t}function Dl(t,e){switch(Q(ls,e),Q(as,t),Q(gt,bs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:oa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=oa(e,t)}X(gt),Q(gt,e)}function dn(){X(gt),X(as),X(ls)}function Ph(t){mr(ls.current);var e=mr(gt.current),r=oa(e,t.type);e!==r&&(Q(as,t),Q(gt,r))}function Ll(t){as.current===t&&(X(gt),X(as))}var te=er(0);function Ti(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var No=[];function Ul(){for(var t=0;t<No.length;t++)No[t]._workInProgressVersionPrimary=null;No.length=0}var oi=Tt.ReactCurrentDispatcher,Io=Tt.ReactCurrentBatchConfig,Sr=0,re=null,he=null,me=null,Oi=!1,Vn=!1,us=0,ey=0;function be(){throw Error(T(321))}function Bl(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ct(t[r],e[r]))return!1;return!0}function zl(t,e,r,n,s,i){if(Sr=i,re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oi.current=t===null||t.memoizedState===null?sy:iy,t=r(n,s),Vn){i=0;do{if(Vn=!1,us=0,25<=i)throw Error(T(301));i+=1,me=he=null,e.updateQueue=null,oi.current=oy,t=r(n,s)}while(Vn)}if(oi.current=Ri,e=he!==null&&he.next!==null,Sr=0,me=he=re=null,Oi=!1,e)throw Error(T(300));return t}function Ml(){var t=us!==0;return us=0,t}function ft(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?re.memoizedState=me=t:me=me.next=t,me}function Xe(){if(he===null){var t=re.alternate;t=t!==null?t.memoizedState:null}else t=he.next;var e=me===null?re.memoizedState:me.next;if(e!==null)me=e,he=t;else{if(t===null)throw Error(T(310));he=t,t={memoizedState:he.memoizedState,baseState:he.baseState,baseQueue:he.baseQueue,queue:he.queue,next:null},me===null?re.memoizedState=me=t:me=me.next=t}return me}function cs(t,e){return typeof e=="function"?e(t):e}function Ao(t){var e=Xe(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=he,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Sr&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,re.lanes|=d,br|=d}c=c.next}while(c!==null&&c!==i);l===null?o=n:l.next=a,ct(n,e.memoizedState)||(Ae=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,re.lanes|=i,br|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function $o(t){var e=Xe(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ct(i,e.memoizedState)||(Ae=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Nh(){}function Ih(t,e){var r=re,n=Xe(),s=e(),i=!ct(n.memoizedState,s);if(i&&(n.memoizedState=s,Ae=!0),n=n.queue,Fl(Dh.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||me!==null&&me.memoizedState.tag&1){if(r.flags|=2048,ds(9,$h.bind(null,r,n,s,e),void 0,null),ge===null)throw Error(T(349));Sr&30||Ah(r,e,s)}return s}function Ah(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function $h(t,e,r,n){e.value=r,e.getSnapshot=n,Lh(e)&&Uh(t)}function Dh(t,e,r){return r(function(){Lh(e)&&Uh(t)})}function Lh(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ct(t,r)}catch{return!0}}function Uh(t){var e=Et(t,1);e!==null&&ut(e,t,1,-1)}function ic(t){var e=ft();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:t},e.queue=t,t=t.dispatch=ny.bind(null,re,t),[e.memoizedState,t]}function ds(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Bh(){return Xe().memoizedState}function ai(t,e,r,n){var s=ft();re.flags|=t,s.memoizedState=ds(1|e,r,void 0,n===void 0?null:n)}function Ji(t,e,r,n){var s=Xe();n=n===void 0?null:n;var i=void 0;if(he!==null){var o=he.memoizedState;if(i=o.destroy,n!==null&&Bl(n,o.deps)){s.memoizedState=ds(e,r,i,n);return}}re.flags|=t,s.memoizedState=ds(1|e,r,i,n)}function oc(t,e){return ai(8390656,8,t,e)}function Fl(t,e){return Ji(2048,8,t,e)}function zh(t,e){return Ji(4,2,t,e)}function Mh(t,e){return Ji(4,4,t,e)}function Fh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wh(t,e,r){return r=r!=null?r.concat([t]):null,Ji(4,4,Fh.bind(null,e,t),r)}function Wl(){}function Vh(t,e){var r=Xe();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Bl(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function qh(t,e){var r=Xe();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Bl(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Hh(t,e,r){return Sr&21?(ct(r,e)||(r=Yd(),re.lanes|=r,br|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ae=!0),t.memoizedState=r)}function ty(t,e){var r=H;H=r!==0&&4>r?r:4,t(!0);var n=Io.transition;Io.transition={};try{t(!1),e()}finally{H=r,Io.transition=n}}function Kh(){return Xe().memoizedState}function ry(t,e,r){var n=Kt(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Gh(t))Jh(e,r);else if(r=Oh(t,e,r,n),r!==null){var s=Re();ut(r,t,n,s),Qh(r,e,n)}}function ny(t,e,r){var n=Kt(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Gh(t))Jh(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,ct(a,o)){var l=e.interleaved;l===null?(s.next=s,Al(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=Oh(t,e,s,n),r!==null&&(s=Re(),ut(r,t,n,s),Qh(r,e,n))}}function Gh(t){var e=t.alternate;return t===re||e!==null&&e===re}function Jh(t,e){Vn=Oi=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Qh(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,_l(t,r)}}var Ri={readContext:Ye,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useInsertionEffect:be,useLayoutEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useMutableSource:be,useSyncExternalStore:be,useId:be,unstable_isNewReconciler:!1},sy={readContext:Ye,useCallback:function(t,e){return ft().memoizedState=[t,e===void 0?null:e],t},useContext:Ye,useEffect:oc,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ai(4194308,4,Fh.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ai(4194308,4,t,e)},useInsertionEffect:function(t,e){return ai(4,2,t,e)},useMemo:function(t,e){var r=ft();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ft();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=ry.bind(null,re,t),[n.memoizedState,t]},useRef:function(t){var e=ft();return t={current:t},e.memoizedState=t},useState:ic,useDebugValue:Wl,useDeferredValue:function(t){return ft().memoizedState=t},useTransition:function(){var t=ic(!1),e=t[0];return t=ty.bind(null,t[1]),ft().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=re,s=ft();if(Z){if(r===void 0)throw Error(T(407));r=r()}else{if(r=e(),ge===null)throw Error(T(349));Sr&30||Ah(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,oc(Dh.bind(null,n,i,t),[t]),n.flags|=2048,ds(9,$h.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=ft(),e=ge.identifierPrefix;if(Z){var r=St,n=xt;r=(n&~(1<<32-lt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=us++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=ey++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iy={readContext:Ye,useCallback:Vh,useContext:Ye,useEffect:Fl,useImperativeHandle:Wh,useInsertionEffect:zh,useLayoutEffect:Mh,useMemo:qh,useReducer:Ao,useRef:Bh,useState:function(){return Ao(cs)},useDebugValue:Wl,useDeferredValue:function(t){var e=Xe();return Hh(e,he.memoizedState,t)},useTransition:function(){var t=Ao(cs)[0],e=Xe().memoizedState;return[t,e]},useMutableSource:Nh,useSyncExternalStore:Ih,useId:Kh,unstable_isNewReconciler:!1},oy={readContext:Ye,useCallback:Vh,useContext:Ye,useEffect:Fl,useImperativeHandle:Wh,useInsertionEffect:zh,useLayoutEffect:Mh,useMemo:qh,useReducer:$o,useRef:Bh,useState:function(){return $o(cs)},useDebugValue:Wl,useDeferredValue:function(t){var e=Xe();return he===null?e.memoizedState=t:Hh(e,he.memoizedState,t)},useTransition:function(){var t=$o(cs)[0],e=Xe().memoizedState;return[t,e]},useMutableSource:Nh,useSyncExternalStore:Ih,useId:Kh,unstable_isNewReconciler:!1};function nt(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Ca(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ne({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Qi={isMounted:function(t){return(t=t._reactInternals)?Er(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Re(),s=Kt(t),i=bt(n,s);i.payload=e,r!=null&&(i.callback=r),e=qt(t,i,s),e!==null&&(ut(e,t,s,n),ii(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Re(),s=Kt(t),i=bt(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=qt(t,i,s),e!==null&&(ut(e,t,s,n),ii(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Re(),n=Kt(t),s=bt(r,n);s.tag=2,e!=null&&(s.callback=e),e=qt(t,s,n),e!==null&&(ut(e,t,n,r),ii(e,t,n))}};function ac(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!ns(r,n)||!ns(s,i):!0}function Yh(t,e,r){var n=!1,s=Xt,i=e.contextType;return typeof i=="object"&&i!==null?i=Ye(i):(s=De(e)?_r:Ee.current,n=e.contextTypes,i=(n=n!=null)?ln(t,s):Xt),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qi,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function lc(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Qi.enqueueReplaceState(e,e.state,null)}function Ta(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},$l(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ye(i):(i=De(e)?_r:Ee.current,s.context=ln(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ca(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qi.enqueueReplaceState(s,s.state,null),Ci(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hn(t,e){try{var r="",n=e;do r+=Am(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Do(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Oa(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ay=typeof WeakMap=="function"?WeakMap:Map;function Xh(t,e,r){r=bt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ni||(Ni=!0,Ba=n),Oa(t,e)},r}function Zh(t,e,r){r=bt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Oa(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Oa(t,e),typeof n!="function"&&(Ht===null?Ht=new Set([this]):Ht.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function uc(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new ay;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=xy.bind(null,t,e,r),e.then(t,t))}function cc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dc(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=bt(-1,1),e.tag=2,qt(r,e,1))),r.lanes|=1),t)}var ly=Tt.ReactCurrentOwner,Ae=!1;function Te(t,e,r,n){e.child=t===null?Th(e,null,r,n):cn(e,t.child,r,n)}function hc(t,e,r,n,s){r=r.render;var i=e.ref;return nn(e,s),n=zl(t,e,r,n,i,s),r=Ml(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ct(t,e,s)):(Z&&r&&Tl(e),e.flags|=1,Te(t,e,n,s),e.child)}function fc(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Yl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,ef(t,e,i,n,s)):(t=di(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ns,r(o,n)&&t.ref===e.ref)return Ct(t,e,s)}return e.flags|=1,t=Gt(i,n),t.ref=e.ref,t.return=e,e.child=t}function ef(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(ns(i,n)&&t.ref===e.ref)if(Ae=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Ae=!0);else return e.lanes=t.lanes,Ct(t,e,s)}return Ra(t,e,r,n,s)}function tf(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(Xr,Be),Be|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Q(Xr,Be),Be|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Q(Xr,Be),Be|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Q(Xr,Be),Be|=n;return Te(t,e,s,r),e.child}function rf(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ra(t,e,r,n,s){var i=De(r)?_r:Ee.current;return i=ln(e,i),nn(e,s),r=zl(t,e,r,n,i,s),n=Ml(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ct(t,e,s)):(Z&&n&&Tl(e),e.flags|=1,Te(t,e,r,s),e.child)}function pc(t,e,r,n,s){if(De(r)){var i=!0;Si(e)}else i=!1;if(nn(e,s),e.stateNode===null)li(t,e),Yh(e,r,n),Ta(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ye(c):(c=De(r)?_r:Ee.current,c=ln(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&lc(e,o,n,c),At=!1;var f=e.memoizedState;o.state=f,Ci(e,n,o,s),l=e.memoizedState,a!==n||f!==l||$e.current||At?(typeof d=="function"&&(Ca(e,r,d,n),l=e.memoizedState),(a=At||ac(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Rh(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:nt(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ye(l):(l=De(r)?_r:Ee.current,l=ln(e,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&lc(e,o,n,l),At=!1,f=e.memoizedState,o.state=f,Ci(e,n,o,s);var y=e.memoizedState;a!==h||f!==y||$e.current||At?(typeof m=="function"&&(Ca(e,r,m,n),y=e.memoizedState),(c=At||ac(e,r,c,n,f,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Pa(t,e,r,n,i,s)}function Pa(t,e,r,n,s,i){rf(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Zu(e,r,!1),Ct(t,e,i);n=e.stateNode,ly.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=cn(e,t.child,null,i),e.child=cn(e,null,a,i)):Te(t,e,a,i),e.memoizedState=n.state,s&&Zu(e,r,!0),e.child}function nf(t){var e=t.stateNode;e.pendingContext?Xu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xu(t,e.context,!1),Dl(t,e.containerInfo)}function mc(t,e,r,n,s){return un(),Rl(s),e.flags|=256,Te(t,e,r,n),e.child}var Na={dehydrated:null,treeContext:null,retryLane:0};function Ia(t){return{baseLanes:t,cachePool:null,transitions:null}}function sf(t,e,r){var n=e.pendingProps,s=te.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Q(te,s&1),t===null)return ja(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zi(o,n,0,null),t=wr(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ia(r),e.memoizedState=Na,t):Vl(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return uy(t,e,o,n,a,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Gt(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Gt(a,i):(i=wr(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Ia(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Na,n}return i=t.child,t=i.sibling,n=Gt(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Vl(t,e){return e=Zi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zs(t,e,r,n){return n!==null&&Rl(n),cn(e,t.child,null,r),t=Vl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uy(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Do(Error(T(422))),zs(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Zi({mode:"visible",children:n.children},s,0,null),i=wr(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&cn(e,t.child,null,o),e.child.memoizedState=Ia(o),e.memoizedState=Na,i);if(!(e.mode&1))return zs(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(T(419)),n=Do(i,n,void 0),zs(t,e,o,n)}if(a=(o&t.childLanes)!==0,Ae||a){if(n=ge,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Et(t,s),ut(n,t,s,-1))}return Ql(),n=Do(Error(T(421))),zs(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Sy.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fe=Vt(s.nextSibling),We=e,Z=!0,at=null,t!==null&&(Ke[Ge++]=xt,Ke[Ge++]=St,Ke[Ge++]=xr,xt=t.id,St=t.overflow,xr=e),e=Vl(e,n.children),e.flags|=4096,e)}function gc(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ea(t.return,e,r)}function Lo(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function of(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Te(t,e,n.children,r),n=te.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gc(t,r,e);else if(t.tag===19)gc(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Q(te,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Ti(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Lo(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ti(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Lo(e,!0,r,null,i);break;case"together":Lo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function li(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ct(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),br|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,r=Gt(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Gt(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function cy(t,e,r){switch(e.tag){case 3:nf(e),un();break;case 5:Ph(e);break;case 1:De(e.type)&&Si(e);break;case 4:Dl(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Q(ji,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Q(te,te.current&1),e.flags|=128,null):r&e.child.childLanes?sf(t,e,r):(Q(te,te.current&1),t=Ct(t,e,r),t!==null?t.sibling:null);Q(te,te.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return of(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Q(te,te.current),n)break;return null;case 22:case 23:return e.lanes=0,tf(t,e,r)}return Ct(t,e,r)}var af,Aa,lf,uf;af=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Aa=function(){};lf=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,mr(gt.current);var i=null;switch(r){case"input":s=ra(t,s),n=ra(t,n),i=[];break;case"select":s=ne({},s,{value:void 0}),n=ne({},n,{value:void 0}),i=[];break;case"textarea":s=ia(t,s),n=ia(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=_i)}aa(r,n);var o;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Qn.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Qn.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Y("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};uf=function(t,e,r,n){r!==n&&(e.flags|=4)};function Nn(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function dy(t,e,r){var n=e.pendingProps;switch(Ol(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(e),null;case 1:return De(e.type)&&xi(),ke(e),null;case 3:return n=e.stateNode,dn(),X($e),X(Ee),Ul(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Us(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,at!==null&&(Fa(at),at=null))),Aa(t,e),ke(e),null;case 5:Ll(e);var s=mr(ls.current);if(r=e.type,t!==null&&e.stateNode!=null)lf(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(T(166));return ke(e),null}if(t=mr(gt.current),Us(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[pt]=e,n[os]=i,t=(e.mode&1)!==0,r){case"dialog":Y("cancel",n),Y("close",n);break;case"iframe":case"object":case"embed":Y("load",n);break;case"video":case"audio":for(s=0;s<Ln.length;s++)Y(Ln[s],n);break;case"source":Y("error",n);break;case"img":case"image":case"link":Y("error",n),Y("load",n);break;case"details":Y("toggle",n);break;case"input":ju(n,i),Y("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Y("invalid",n);break;case"textarea":Cu(n,i),Y("invalid",n)}aa(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ls(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ls(n.textContent,a,t),s=["children",""+a]):Qn.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Y("scroll",n)}switch(r){case"input":Os(n),Eu(n,i,!0);break;case"textarea":Os(n),Tu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=_i)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dd(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[pt]=e,t[os]=n,af(t,e,!1,!1),e.stateNode=t;e:{switch(o=la(r,n),r){case"dialog":Y("cancel",t),Y("close",t),s=n;break;case"iframe":case"object":case"embed":Y("load",t),s=n;break;case"video":case"audio":for(s=0;s<Ln.length;s++)Y(Ln[s],t);s=n;break;case"source":Y("error",t),s=n;break;case"img":case"image":case"link":Y("error",t),Y("load",t),s=n;break;case"details":Y("toggle",t),s=n;break;case"input":ju(t,n),s=ra(t,n),Y("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=ne({},n,{value:void 0}),Y("invalid",t);break;case"textarea":Cu(t,n),s=ia(t,n),Y("invalid",t);break;default:s=n}aa(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Bd(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ld(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Yn(t,l):typeof l=="number"&&Yn(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qn.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Y("scroll",t):l!=null&&pl(t,i,l,o))}switch(r){case"input":Os(t),Eu(t,n,!1);break;case"textarea":Os(t),Tu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Yt(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Zr(t,!!n.multiple,i,!1):n.defaultValue!=null&&Zr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_i)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ke(e),null;case 6:if(t&&e.stateNode!=null)uf(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(T(166));if(r=mr(ls.current),mr(gt.current),Us(e)){if(n=e.stateNode,r=e.memoizedProps,n[pt]=e,(i=n.nodeValue!==r)&&(t=We,t!==null))switch(t.tag){case 3:Ls(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ls(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[pt]=e,e.stateNode=n}return ke(e),null;case 13:if(X(te),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Z&&Fe!==null&&e.mode&1&&!(e.flags&128))Eh(),un(),e.flags|=98560,i=!1;else if(i=Us(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(T(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[pt]=e}else un(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ke(e),i=!1}else at!==null&&(Fa(at),at=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||te.current&1?fe===0&&(fe=3):Ql())),e.updateQueue!==null&&(e.flags|=4),ke(e),null);case 4:return dn(),Aa(t,e),t===null&&ss(e.stateNode.containerInfo),ke(e),null;case 10:return Il(e.type._context),ke(e),null;case 17:return De(e.type)&&xi(),ke(e),null;case 19:if(X(te),i=e.memoizedState,i===null)return ke(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Nn(i,!1);else{if(fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ti(t),o!==null){for(e.flags|=128,Nn(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Q(te,te.current&1|2),e.child}t=t.sibling}i.tail!==null&&ae()>fn&&(e.flags|=128,n=!0,Nn(i,!1),e.lanes=4194304)}else{if(!n)if(t=Ti(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Nn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Z)return ke(e),null}else 2*ae()-i.renderingStartTime>fn&&r!==1073741824&&(e.flags|=128,n=!0,Nn(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ae(),e.sibling=null,r=te.current,Q(te,n?r&1|2:r&1),e):(ke(e),null);case 22:case 23:return Jl(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Be&1073741824&&(ke(e),e.subtreeFlags&6&&(e.flags|=8192)):ke(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function hy(t,e){switch(Ol(e),e.tag){case 1:return De(e.type)&&xi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dn(),X($e),X(Ee),Ul(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ll(e),null;case 13:if(X(te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));un()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(te),null;case 4:return dn(),null;case 10:return Il(e.type._context),null;case 22:case 23:return Jl(),null;case 24:return null;default:return null}}var Ms=!1,je=!1,fy=typeof WeakSet=="function"?WeakSet:Set,N=null;function Yr(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ie(t,e,n)}else r.current=null}function $a(t,e,r){try{r()}catch(n){ie(t,e,n)}}var yc=!1;function py(t,e){if(va=yi,t=fh(),Cl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(a=o+s),h!==i||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++c===s&&(a=o),f===i&&++d===n&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(wa={focusedElem:t,selectionRange:r},yi=!1,N=e;N!==null;)if(e=N,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,N=t;else for(;N!==null;){e=N;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,x=y.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:nt(e.type,w),x);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(_){ie(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,N=t;break}N=e.return}return y=yc,yc=!1,y}function qn(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&$a(e,r,i)}s=s.next}while(s!==n)}}function Yi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Da(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function cf(t){var e=t.alternate;e!==null&&(t.alternate=null,cf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pt],delete e[os],delete e[Sa],delete e[Qg],delete e[Yg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function df(t){return t.tag===5||t.tag===3||t.tag===4}function vc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||df(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function La(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=_i));else if(n!==4&&(t=t.child,t!==null))for(La(t,e,r),t=t.sibling;t!==null;)La(t,e,r),t=t.sibling}function Ua(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ua(t,e,r),t=t.sibling;t!==null;)Ua(t,e,r),t=t.sibling}var we=null,it=!1;function Pt(t,e,r){for(r=r.child;r!==null;)hf(t,e,r),r=r.sibling}function hf(t,e,r){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Wi,r)}catch{}switch(r.tag){case 5:je||Yr(r,e);case 6:var n=we,s=it;we=null,Pt(t,e,r),we=n,it=s,we!==null&&(it?(t=we,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):we.removeChild(r.stateNode));break;case 18:we!==null&&(it?(t=we,r=r.stateNode,t.nodeType===8?Ro(t.parentNode,r):t.nodeType===1&&Ro(t,r),ts(t)):Ro(we,r.stateNode));break;case 4:n=we,s=it,we=r.stateNode.containerInfo,it=!0,Pt(t,e,r),we=n,it=s;break;case 0:case 11:case 14:case 15:if(!je&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&$a(r,e,o),s=s.next}while(s!==n)}Pt(t,e,r);break;case 1:if(!je&&(Yr(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ie(r,e,a)}Pt(t,e,r);break;case 21:Pt(t,e,r);break;case 22:r.mode&1?(je=(n=je)||r.memoizedState!==null,Pt(t,e,r),je=n):Pt(t,e,r);break;default:Pt(t,e,r)}}function wc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new fy),e.forEach(function(n){var s=by.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function et(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:we=a.stateNode,it=!1;break e;case 3:we=a.stateNode.containerInfo,it=!0;break e;case 4:we=a.stateNode.containerInfo,it=!0;break e}a=a.return}if(we===null)throw Error(T(160));hf(i,o,s),we=null,it=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ie(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ff(e,t),e=e.sibling}function ff(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(et(e,t),ht(t),n&4){try{qn(3,t,t.return),Yi(3,t)}catch(w){ie(t,t.return,w)}try{qn(5,t,t.return)}catch(w){ie(t,t.return,w)}}break;case 1:et(e,t),ht(t),n&512&&r!==null&&Yr(r,r.return);break;case 5:if(et(e,t),ht(t),n&512&&r!==null&&Yr(r,r.return),t.flags&32){var s=t.stateNode;try{Yn(s,"")}catch(w){ie(t,t.return,w)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ad(s,i),la(a,o);var c=la(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Bd(s,h):d==="dangerouslySetInnerHTML"?Ld(s,h):d==="children"?Yn(s,h):pl(s,d,h,c)}switch(a){case"input":na(s,i);break;case"textarea":$d(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Zr(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Zr(s,!!i.multiple,i.defaultValue,!0):Zr(s,!!i.multiple,i.multiple?[]:"",!1))}s[os]=i}catch(w){ie(t,t.return,w)}}break;case 6:if(et(e,t),ht(t),n&4){if(t.stateNode===null)throw Error(T(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){ie(t,t.return,w)}}break;case 3:if(et(e,t),ht(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ts(e.containerInfo)}catch(w){ie(t,t.return,w)}break;case 4:et(e,t),ht(t);break;case 13:et(e,t),ht(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Kl=ae())),n&4&&wc(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(je=(c=je)||d,et(e,t),je=c):et(e,t),ht(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(N=t,d=t.child;d!==null;){for(h=N=d;N!==null;){switch(f=N,m=f.child,f.tag){case 0:case 11:case 14:case 15:qn(4,f,f.return);break;case 1:Yr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){ie(n,r,w)}}break;case 5:Yr(f,f.return);break;case 22:if(f.memoizedState!==null){xc(h);continue}}m!==null?(m.return=f,N=m):xc(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ud("display",o))}catch(w){ie(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){ie(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:et(e,t),ht(t),n&4&&wc(t);break;case 21:break;default:et(e,t),ht(t)}}function ht(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(df(r)){var n=r;break e}r=r.return}throw Error(T(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Yn(s,""),n.flags&=-33);var i=vc(t);Ua(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=vc(t);La(t,a,o);break;default:throw Error(T(161))}}catch(l){ie(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function my(t,e,r){N=t,pf(t)}function pf(t,e,r){for(var n=(t.mode&1)!==0;N!==null;){var s=N,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ms;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||je;a=Ms;var c=je;if(Ms=o,(je=l)&&!c)for(N=s;N!==null;)o=N,l=o.child,o.tag===22&&o.memoizedState!==null?Sc(s):l!==null?(l.return=o,N=l):Sc(s);for(;i!==null;)N=i,pf(i),i=i.sibling;N=s,Ms=a,je=c}_c(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,N=i):_c(t)}}function _c(t){for(;N!==null;){var e=N;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:je||Yi(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!je)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:nt(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&sc(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}sc(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ts(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}je||e.flags&512&&Da(e)}catch(f){ie(e,e.return,f)}}if(e===t){N=null;break}if(r=e.sibling,r!==null){r.return=e.return,N=r;break}N=e.return}}function xc(t){for(;N!==null;){var e=N;if(e===t){N=null;break}var r=e.sibling;if(r!==null){r.return=e.return,N=r;break}N=e.return}}function Sc(t){for(;N!==null;){var e=N;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Yi(4,e)}catch(l){ie(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){ie(e,s,l)}}var i=e.return;try{Da(e)}catch(l){ie(e,i,l)}break;case 5:var o=e.return;try{Da(e)}catch(l){ie(e,o,l)}}}catch(l){ie(e,e.return,l)}if(e===t){N=null;break}var a=e.sibling;if(a!==null){a.return=e.return,N=a;break}N=e.return}}var gy=Math.ceil,Pi=Tt.ReactCurrentDispatcher,ql=Tt.ReactCurrentOwner,Qe=Tt.ReactCurrentBatchConfig,F=0,ge=null,ce=null,xe=0,Be=0,Xr=er(0),fe=0,hs=null,br=0,Xi=0,Hl=0,Hn=null,Ie=null,Kl=0,fn=1/0,vt=null,Ni=!1,Ba=null,Ht=null,Fs=!1,Bt=null,Ii=0,Kn=0,za=null,ui=-1,ci=0;function Re(){return F&6?ae():ui!==-1?ui:ui=ae()}function Kt(t){return t.mode&1?F&2&&xe!==0?xe&-xe:Zg.transition!==null?(ci===0&&(ci=Yd()),ci):(t=H,t!==0||(t=window.event,t=t===void 0?16:sh(t.type)),t):1}function ut(t,e,r,n){if(50<Kn)throw Kn=0,za=null,Error(T(185));_s(t,r,n),(!(F&2)||t!==ge)&&(t===ge&&(!(F&2)&&(Xi|=r),fe===4&&Dt(t,xe)),Le(t,n),r===1&&F===0&&!(e.mode&1)&&(fn=ae()+500,Gi&&tr()))}function Le(t,e){var r=t.callbackNode;Zm(t,e);var n=gi(t,t===ge?xe:0);if(n===0)r!==null&&Pu(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Pu(r),e===1)t.tag===0?Xg(bc.bind(null,t)):bh(bc.bind(null,t)),Gg(function(){!(F&6)&&tr()}),r=null;else{switch(Xd(n)){case 1:r=wl;break;case 4:r=Jd;break;case 16:r=mi;break;case 536870912:r=Qd;break;default:r=mi}r=Sf(r,mf.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function mf(t,e){if(ui=-1,ci=0,F&6)throw Error(T(327));var r=t.callbackNode;if(sn()&&t.callbackNode!==r)return null;var n=gi(t,t===ge?xe:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ai(t,n);else{e=n;var s=F;F|=2;var i=yf();(ge!==t||xe!==e)&&(vt=null,fn=ae()+500,vr(t,e));do try{wy();break}catch(a){gf(t,a)}while(!0);Nl(),Pi.current=i,F=s,ce!==null?e=0:(ge=null,xe=0,e=fe)}if(e!==0){if(e===2&&(s=fa(t),s!==0&&(n=s,e=Ma(t,s))),e===1)throw r=hs,vr(t,0),Dt(t,n),Le(t,ae()),r;if(e===6)Dt(t,n);else{if(s=t.current.alternate,!(n&30)&&!yy(s)&&(e=Ai(t,n),e===2&&(i=fa(t),i!==0&&(n=i,e=Ma(t,i))),e===1))throw r=hs,vr(t,0),Dt(t,n),Le(t,ae()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(T(345));case 2:lr(t,Ie,vt);break;case 3:if(Dt(t,n),(n&130023424)===n&&(e=Kl+500-ae(),10<e)){if(gi(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Re(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=xa(lr.bind(null,t,Ie,vt),e);break}lr(t,Ie,vt);break;case 4:if(Dt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-lt(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=ae()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*gy(n/1960))-n,10<n){t.timeoutHandle=xa(lr.bind(null,t,Ie,vt),n);break}lr(t,Ie,vt);break;case 5:lr(t,Ie,vt);break;default:throw Error(T(329))}}}return Le(t,ae()),t.callbackNode===r?mf.bind(null,t):null}function Ma(t,e){var r=Hn;return t.current.memoizedState.isDehydrated&&(vr(t,e).flags|=256),t=Ai(t,e),t!==2&&(e=Ie,Ie=r,e!==null&&Fa(e)),t}function Fa(t){Ie===null?Ie=t:Ie.push.apply(Ie,t)}function yy(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ct(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dt(t,e){for(e&=~Hl,e&=~Xi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-lt(e),n=1<<r;t[r]=-1,e&=~n}}function bc(t){if(F&6)throw Error(T(327));sn();var e=gi(t,0);if(!(e&1))return Le(t,ae()),null;var r=Ai(t,e);if(t.tag!==0&&r===2){var n=fa(t);n!==0&&(e=n,r=Ma(t,n))}if(r===1)throw r=hs,vr(t,0),Dt(t,e),Le(t,ae()),r;if(r===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,lr(t,Ie,vt),Le(t,ae()),null}function Gl(t,e){var r=F;F|=1;try{return t(e)}finally{F=r,F===0&&(fn=ae()+500,Gi&&tr())}}function kr(t){Bt!==null&&Bt.tag===0&&!(F&6)&&sn();var e=F;F|=1;var r=Qe.transition,n=H;try{if(Qe.transition=null,H=1,t)return t()}finally{H=n,Qe.transition=r,F=e,!(F&6)&&tr()}}function Jl(){Be=Xr.current,X(Xr)}function vr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Kg(r)),ce!==null)for(r=ce.return;r!==null;){var n=r;switch(Ol(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&xi();break;case 3:dn(),X($e),X(Ee),Ul();break;case 5:Ll(n);break;case 4:dn();break;case 13:X(te);break;case 19:X(te);break;case 10:Il(n.type._context);break;case 22:case 23:Jl()}r=r.return}if(ge=t,ce=t=Gt(t.current,null),xe=Be=e,fe=0,hs=null,Hl=Xi=br=0,Ie=Hn=null,pr!==null){for(e=0;e<pr.length;e++)if(r=pr[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}pr=null}return t}function gf(t,e){do{var r=ce;try{if(Nl(),oi.current=Ri,Oi){for(var n=re.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Oi=!1}if(Sr=0,me=he=re=null,Vn=!1,us=0,ql.current=null,r===null||r.return===null){fe=1,hs=e,ce=null;break}e:{var i=t,o=r.return,a=r,l=e;if(e=xe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=cc(o);if(m!==null){m.flags&=-257,dc(m,o,a,i,e),m.mode&1&&uc(i,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){uc(i,c,e),Ql();break e}l=Error(T(426))}}else if(Z&&a.mode&1){var x=cc(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),dc(x,o,a,i,e),Rl(hn(l,a));break e}}i=l=hn(l,a),fe!==4&&(fe=2),Hn===null?Hn=[i]:Hn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=Xh(i,l,e);nc(i,p);break e;case 1:a=l;var g=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ht===null||!Ht.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=Zh(i,a,e);nc(i,_);break e}}i=i.return}while(i!==null)}wf(r)}catch(S){e=S,ce===r&&r!==null&&(ce=r=r.return);continue}break}while(!0)}function yf(){var t=Pi.current;return Pi.current=Ri,t===null?Ri:t}function Ql(){(fe===0||fe===3||fe===2)&&(fe=4),ge===null||!(br&268435455)&&!(Xi&268435455)||Dt(ge,xe)}function Ai(t,e){var r=F;F|=2;var n=yf();(ge!==t||xe!==e)&&(vt=null,vr(t,e));do try{vy();break}catch(s){gf(t,s)}while(!0);if(Nl(),F=r,Pi.current=n,ce!==null)throw Error(T(261));return ge=null,xe=0,fe}function vy(){for(;ce!==null;)vf(ce)}function wy(){for(;ce!==null&&!Vm();)vf(ce)}function vf(t){var e=xf(t.alternate,t,Be);t.memoizedProps=t.pendingProps,e===null?wf(t):ce=e,ql.current=null}function wf(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=hy(r,e),r!==null){r.flags&=32767,ce=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fe=6,ce=null;return}}else if(r=dy(r,e,Be),r!==null){ce=r;return}if(e=e.sibling,e!==null){ce=e;return}ce=e=t}while(e!==null);fe===0&&(fe=5)}function lr(t,e,r){var n=H,s=Qe.transition;try{Qe.transition=null,H=1,_y(t,e,r,n)}finally{Qe.transition=s,H=n}return null}function _y(t,e,r,n){do sn();while(Bt!==null);if(F&6)throw Error(T(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(eg(t,i),t===ge&&(ce=ge=null,xe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Fs||(Fs=!0,Sf(mi,function(){return sn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Qe.transition,Qe.transition=null;var o=H;H=1;var a=F;F|=4,ql.current=null,py(t,r),ff(r,t),zg(wa),yi=!!va,wa=va=null,t.current=r,my(r),qm(),F=a,H=o,Qe.transition=i}else t.current=r;if(Fs&&(Fs=!1,Bt=t,Ii=s),i=t.pendingLanes,i===0&&(Ht=null),Gm(r.stateNode),Le(t,ae()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ni)throw Ni=!1,t=Ba,Ba=null,t;return Ii&1&&t.tag!==0&&sn(),i=t.pendingLanes,i&1?t===za?Kn++:(Kn=0,za=t):Kn=0,tr(),null}function sn(){if(Bt!==null){var t=Xd(Ii),e=Qe.transition,r=H;try{if(Qe.transition=null,H=16>t?16:t,Bt===null)var n=!1;else{if(t=Bt,Bt=null,Ii=0,F&6)throw Error(T(331));var s=F;for(F|=4,N=t.current;N!==null;){var i=N,o=i.child;if(N.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(N=c;N!==null;){var d=N;switch(d.tag){case 0:case 11:case 15:qn(8,d,i)}var h=d.child;if(h!==null)h.return=d,N=h;else for(;N!==null;){d=N;var f=d.sibling,m=d.return;if(cf(d),d===c){N=null;break}if(f!==null){f.return=m,N=f;break}N=m}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}N=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,N=o;else e:for(;N!==null;){if(i=N,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qn(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,N=p;break e}N=i.return}}var g=t.current;for(N=g;N!==null;){o=N;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,N=v;else e:for(o=g;N!==null;){if(a=N,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yi(9,a)}}catch(S){ie(a,a.return,S)}if(a===o){N=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,N=_;break e}N=a.return}}if(F=s,tr(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Wi,t)}catch{}n=!0}return n}finally{H=r,Qe.transition=e}}return!1}function kc(t,e,r){e=hn(r,e),e=Xh(t,e,1),t=qt(t,e,1),e=Re(),t!==null&&(_s(t,1,e),Le(t,e))}function ie(t,e,r){if(t.tag===3)kc(t,t,r);else for(;e!==null;){if(e.tag===3){kc(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ht===null||!Ht.has(n))){t=hn(r,t),t=Zh(e,t,1),e=qt(e,t,1),t=Re(),e!==null&&(_s(e,1,t),Le(e,t));break}}e=e.return}}function xy(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Re(),t.pingedLanes|=t.suspendedLanes&r,ge===t&&(xe&r)===r&&(fe===4||fe===3&&(xe&130023424)===xe&&500>ae()-Kl?vr(t,0):Hl|=r),Le(t,e)}function _f(t,e){e===0&&(t.mode&1?(e=Ns,Ns<<=1,!(Ns&130023424)&&(Ns=4194304)):e=1);var r=Re();t=Et(t,e),t!==null&&(_s(t,e,r),Le(t,r))}function Sy(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),_f(t,r)}function by(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(e),_f(t,r)}var xf;xf=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||$e.current)Ae=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ae=!1,cy(t,e,r);Ae=!!(t.flags&131072)}else Ae=!1,Z&&e.flags&1048576&&kh(e,ki,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;li(t,e),t=e.pendingProps;var s=ln(e,Ee.current);nn(e,r),s=zl(null,e,n,t,s,r);var i=Ml();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,De(n)?(i=!0,Si(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$l(e),s.updater=Qi,e.stateNode=s,s._reactInternals=e,Ta(e,n,t,r),e=Pa(null,e,n,!0,i,r)):(e.tag=0,Z&&i&&Tl(e),Te(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(li(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=jy(n),t=nt(n,t),s){case 0:e=Ra(null,e,n,t,r);break e;case 1:e=pc(null,e,n,t,r);break e;case 11:e=hc(null,e,n,t,r);break e;case 14:e=fc(null,e,n,nt(n.type,t),r);break e}throw Error(T(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nt(n,s),Ra(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nt(n,s),pc(t,e,n,s,r);case 3:e:{if(nf(e),t===null)throw Error(T(387));n=e.pendingProps,i=e.memoizedState,s=i.element,Rh(t,e),Ci(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=hn(Error(T(423)),e),e=mc(t,e,n,r,s);break e}else if(n!==s){s=hn(Error(T(424)),e),e=mc(t,e,n,r,s);break e}else for(Fe=Vt(e.stateNode.containerInfo.firstChild),We=e,Z=!0,at=null,r=Th(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(un(),n===s){e=Ct(t,e,r);break e}Te(t,e,n,r)}e=e.child}return e;case 5:return Ph(e),t===null&&ja(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,_a(n,s)?o=null:i!==null&&_a(n,i)&&(e.flags|=32),rf(t,e),Te(t,e,o,r),e.child;case 6:return t===null&&ja(e),null;case 13:return sf(t,e,r);case 4:return Dl(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=cn(e,null,n,r):Te(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nt(n,s),hc(t,e,n,s,r);case 7:return Te(t,e,e.pendingProps,r),e.child;case 8:return Te(t,e,e.pendingProps.children,r),e.child;case 12:return Te(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Q(ji,n._currentValue),n._currentValue=o,i!==null)if(ct(i.value,o)){if(i.children===s.children&&!$e.current){e=Ct(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=bt(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Ea(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(T(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Ea(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Te(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,nn(e,r),s=Ye(s),n=n(s),e.flags|=1,Te(t,e,n,r),e.child;case 14:return n=e.type,s=nt(n,e.pendingProps),s=nt(n.type,s),fc(t,e,n,s,r);case 15:return ef(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nt(n,s),li(t,e),e.tag=1,De(n)?(t=!0,Si(e)):t=!1,nn(e,r),Yh(e,n,s),Ta(e,n,s,r),Pa(null,e,n,!0,t,r);case 19:return of(t,e,r);case 22:return tf(t,e,r)}throw Error(T(156,e.tag))};function Sf(t,e){return Gd(t,e)}function ky(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(t,e,r,n){return new ky(t,e,r,n)}function Yl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jy(t){if(typeof t=="function")return Yl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gl)return 11;if(t===yl)return 14}return 2}function Gt(t,e){var r=t.alternate;return r===null?(r=Je(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function di(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")Yl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fr:return wr(r.children,s,i,e);case ml:o=8,s|=8;break;case Xo:return t=Je(12,r,e,s|2),t.elementType=Xo,t.lanes=i,t;case Zo:return t=Je(13,r,e,s),t.elementType=Zo,t.lanes=i,t;case ea:return t=Je(19,r,e,s),t.elementType=ea,t.lanes=i,t;case Pd:return Zi(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Od:o=10;break e;case Rd:o=9;break e;case gl:o=11;break e;case yl:o=14;break e;case It:o=16,n=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=Je(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function wr(t,e,r,n){return t=Je(7,t,n,e),t.lanes=r,t}function Zi(t,e,r,n){return t=Je(22,t,n,e),t.elementType=Pd,t.lanes=r,t.stateNode={isHidden:!1},t}function Uo(t,e,r){return t=Je(6,t,null,e),t.lanes=r,t}function Bo(t,e,r){return e=Je(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ey(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wo(0),this.expirationTimes=wo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wo(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xl(t,e,r,n,s,i,o,a,l){return t=new Ey(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Je(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$l(i),t}function Cy(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function bf(t){if(!t)return Xt;t=t._reactInternals;e:{if(Er(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(De(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var r=t.type;if(De(r))return Sh(t,r,e)}return e}function kf(t,e,r,n,s,i,o,a,l){return t=Xl(r,n,!0,t,s,i,o,a,l),t.context=bf(null),r=t.current,n=Re(),s=Kt(r),i=bt(n,s),i.callback=e??null,qt(r,i,s),t.current.lanes=s,_s(t,s,n),Le(t,n),t}function eo(t,e,r,n){var s=e.current,i=Re(),o=Kt(s);return r=bf(r),e.context===null?e.context=r:e.pendingContext=r,e=bt(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=qt(s,e,o),t!==null&&(ut(t,s,o,i),ii(t,s,o)),o}function $i(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Zl(t,e){jc(t,e),(t=t.alternate)&&jc(t,e)}function Ty(){return null}var jf=typeof reportError=="function"?reportError:function(t){console.error(t)};function eu(t){this._internalRoot=t}to.prototype.render=eu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));eo(t,e,null,null)};to.prototype.unmount=eu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kr(function(){eo(null,t,null,null)}),e[jt]=null}};function to(t){this._internalRoot=t}to.prototype.unstable_scheduleHydration=function(t){if(t){var e=th();t={blockedOn:null,target:t,priority:e};for(var r=0;r<$t.length&&e!==0&&e<$t[r].priority;r++);$t.splice(r,0,t),r===0&&nh(t)}};function tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ro(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ec(){}function Oy(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=$i(o);i.call(c)}}var o=kf(e,n,t,0,null,!1,!1,"",Ec);return t._reactRootContainer=o,t[jt]=o.current,ss(t.nodeType===8?t.parentNode:t),kr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=$i(l);a.call(c)}}var l=Xl(t,0,!1,null,null,!1,!1,"",Ec);return t._reactRootContainer=l,t[jt]=l.current,ss(t.nodeType===8?t.parentNode:t),kr(function(){eo(e,l,r,n)}),l}function no(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=$i(o);a.call(l)}}eo(e,o,t,s)}else o=Oy(r,e,t,s,n);return $i(o)}Zd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Dn(e.pendingLanes);r!==0&&(_l(e,r|1),Le(e,ae()),!(F&6)&&(fn=ae()+500,tr()))}break;case 13:kr(function(){var n=Et(t,1);if(n!==null){var s=Re();ut(n,t,1,s)}}),Zl(t,1)}};xl=function(t){if(t.tag===13){var e=Et(t,134217728);if(e!==null){var r=Re();ut(e,t,134217728,r)}Zl(t,134217728)}};eh=function(t){if(t.tag===13){var e=Kt(t),r=Et(t,e);if(r!==null){var n=Re();ut(r,t,e,n)}Zl(t,e)}};th=function(){return H};rh=function(t,e){var r=H;try{return H=t,e()}finally{H=r}};ca=function(t,e,r){switch(e){case"input":if(na(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Ki(n);if(!s)throw Error(T(90));Id(n),na(n,s)}}}break;case"textarea":$d(t,r);break;case"select":e=r.value,e!=null&&Zr(t,!!r.multiple,e,!1)}};Fd=Gl;Wd=kr;var Ry={usingClientEntryPoint:!1,Events:[Ss,Hr,Ki,zd,Md,Gl]},In={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Py={bundleType:In.bundleType,version:In.version,rendererPackageName:In.rendererPackageName,rendererConfig:In.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hd(t),t===null?null:t.stateNode},findFiberByHostInstance:In.findFiberByHostInstance||Ty,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ws=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ws.isDisabled&&Ws.supportsFiber)try{Wi=Ws.inject(Py),mt=Ws}catch{}}qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ry;qe.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(e))throw Error(T(200));return Cy(t,e,null,r)};qe.createRoot=function(t,e){if(!tu(t))throw Error(T(299));var r=!1,n="",s=jf;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Xl(t,1,!1,null,null,r,!1,n,s),t[jt]=e.current,ss(t.nodeType===8?t.parentNode:t),new eu(e)};qe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Hd(e),t=t===null?null:t.stateNode,t};qe.flushSync=function(t){return kr(t)};qe.hydrate=function(t,e,r){if(!ro(e))throw Error(T(200));return no(null,t,e,!0,r)};qe.hydrateRoot=function(t,e,r){if(!tu(t))throw Error(T(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=jf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=kf(e,null,t,1,r??null,s,!1,i,o),t[jt]=e.current,ss(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new to(e)};qe.render=function(t,e,r){if(!ro(e))throw Error(T(200));return no(null,t,e,!1,r)};qe.unmountComponentAtNode=function(t){if(!ro(t))throw Error(T(40));return t._reactRootContainer?(kr(function(){no(null,null,t,!1,function(){t._reactRootContainer=null,t[jt]=null})}),!0):!1};qe.unstable_batchedUpdates=Gl;qe.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ro(r))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return no(t,e,r,!1,n)};qe.version="18.3.1-next-f1338f8080-20240426";function Ef(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ef)}catch(t){console.error(t)}}Ef(),jd.exports=qe;var Ny=jd.exports,Cc=Ny;Qo.createRoot=Cc.createRoot,Qo.hydrateRoot=Cc.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fs(){return fs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fs.apply(this,arguments)}var zt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zt||(zt={}));const Tc="popstate";function Iy(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return Wa("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Di(s)}return $y(e,r,null,t)}function le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ru(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ay(){return Math.random().toString(36).substr(2,8)}function Oc(t,e){return{usr:t.state,key:t.key,idx:e}}function Wa(t,e,r,n){return r===void 0&&(r=null),fs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wn(e):e,{state:r,key:e&&e.key||n||Ay()})}function Di(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function wn(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function $y(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=zt.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(fs({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=zt.Pop;let x=d(),p=x==null?null:x-c;c=x,l&&l({action:a,location:w.location,delta:p})}function f(x,p){a=zt.Push;let g=Wa(w.location,x,p);c=d()+1;let v=Oc(g,c),_=w.createHref(g);try{o.pushState(v,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}i&&l&&l({action:a,location:w.location,delta:1})}function m(x,p){a=zt.Replace;let g=Wa(w.location,x,p);c=d();let v=Oc(g,c),_=w.createHref(g);o.replaceState(v,"",_),i&&l&&l({action:a,location:w.location,delta:0})}function y(x){let p=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof x=="string"?x:Di(x);return g=g.replace(/ $/,"%20"),le(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let w={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Tc,h),l=x,()=>{s.removeEventListener(Tc,h),l=null}},createHref(x){return e(s,x)},createURL:y,encodeLocation(x){let p=y(x);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:m,go(x){return o.go(x)}};return w}var Rc;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Rc||(Rc={}));function Dy(t,e,r){return r===void 0&&(r="/"),Ly(t,e,r)}function Ly(t,e,r,n){let s=typeof e=="string"?wn(e):e,i=nu(s.pathname||"/",r);if(i==null)return null;let o=Cf(t);Uy(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Qy(i);a=Ky(o[l],c)}return a}function Cf(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(le(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Jt([n,l.relativePath]),d=r.concat(l);i.children&&i.children.length>0&&(le(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Cf(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:qy(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Tf(i.path))s(i,o,l)}),e}function Tf(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Tf(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Uy(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Hy(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const By=/^:[\w-]+$/,zy=3,My=2,Fy=1,Wy=10,Vy=-2,Pc=t=>t==="*";function qy(t,e){let r=t.split("/"),n=r.length;return r.some(Pc)&&(n+=Vy),e&&(n+=My),r.filter(s=>!Pc(s)).reduce((s,i)=>s+(By.test(i)?zy:i===""?Fy:Wy),n)}function Hy(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function Ky(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Gy({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Jt([i,h.pathname]),pathnameBase:tv(Jt([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Jt([i,h.pathnameBase]))}return o}function Gy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Jy(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let w=a[h]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=a[h];return m&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Jy(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),ru(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Qy(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ru(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function nu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Yy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xy=t=>Yy.test(t);function Zy(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?wn(t):t,i;if(r)if(Xy(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),ru(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=Nc(r.substring(1),"/"):i=Nc(r,e)}else i=e;return{pathname:i,search:rv(n),hash:nv(s)}}function Nc(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function zo(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ev(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function su(t,e){let r=ev(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function iu(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=wn(t):(s=fs({},t),le(!s.pathname||!s.pathname.includes("?"),zo("?","pathname","search",s)),le(!s.pathname||!s.pathname.includes("#"),zo("#","pathname","hash",s)),le(!s.search||!s.search.includes("#"),zo("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Zy(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Jt=t=>t.join("/").replace(/\/\/+/g,"/"),tv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function sv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Of=["post","put","patch","delete"];new Set(Of);const iv=["get",...Of];new Set(iv);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ps(){return ps=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ps.apply(this,arguments)}const ou=b.createContext(null),ov=b.createContext(null),rr=b.createContext(null),so=b.createContext(null),nr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Rf=b.createContext(null);function av(t,e){let{relative:r}=e===void 0?{}:e;_n()||le(!1);let{basename:n,navigator:s}=b.useContext(rr),{hash:i,pathname:o,search:a}=Nf(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:Jt([n,o])),s.createHref({pathname:l,search:a,hash:i})}function _n(){return b.useContext(so)!=null}function Cr(){return _n()||le(!1),b.useContext(so).location}function Pf(t){b.useContext(rr).static||b.useLayoutEffect(t)}function io(){let{isDataRoute:t}=b.useContext(nr);return t?_v():lv()}function lv(){_n()||le(!1);let t=b.useContext(ou),{basename:e,future:r,navigator:n}=b.useContext(rr),{matches:s}=b.useContext(nr),{pathname:i}=Cr(),o=JSON.stringify(su(s,r.v7_relativeSplatPath)),a=b.useRef(!1);return Pf(()=>{a.current=!0}),b.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=iu(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Jt([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,i,t])}function Nf(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=b.useContext(rr),{matches:s}=b.useContext(nr),{pathname:i}=Cr(),o=JSON.stringify(su(s,n.v7_relativeSplatPath));return b.useMemo(()=>iu(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function uv(t,e){return cv(t,e)}function cv(t,e,r,n){_n()||le(!1);let{navigator:s}=b.useContext(rr),{matches:i}=b.useContext(nr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Cr(),d;if(e){var h;let x=typeof e=="string"?wn(e):e;l==="/"||(h=x.pathname)!=null&&h.startsWith(l)||le(!1),d=x}else d=c;let f=d.pathname||"/",m=f;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=Dy(t,{pathname:m}),w=mv(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Jt([l,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Jt([l,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return e&&w?b.createElement(so.Provider,{value:{location:ps({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:zt.Pop}},w):w}function dv(){let t=wv(),e=sv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),r?b.createElement("pre",{style:s},r):null,null)}const hv=b.createElement(dv,null);class fv extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?b.createElement(nr.Provider,{value:this.props.routeContext},b.createElement(Rf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pv(t){let{routeContext:e,match:r,children:n}=t,s=b.useContext(ou);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(nr.Provider,{value:e},n)}function mv(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(s=r)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||le(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,y=!1,w=null,x=null;r&&(m=a&&h.route.id?a[h.route.id]:void 0,w=h.route.errorElement||hv,l&&(c<0&&f===0?(xv("route-fallback"),y=!0,x=null):c===f&&(y=!0,x=h.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,f+1)),g=()=>{let v;return m?v=w:y?v=x:h.route.Component?v=b.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,b.createElement(pv,{match:h,routeContext:{outlet:d,matches:p,isDataRoute:r!=null},children:v})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(fv,{location:r.location,revalidation:r.revalidation,component:w,error:m,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var If=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(If||{}),Af=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Af||{});function gv(t){let e=b.useContext(ou);return e||le(!1),e}function yv(t){let e=b.useContext(ov);return e||le(!1),e}function vv(t){let e=b.useContext(nr);return e||le(!1),e}function $f(t){let e=vv(),r=e.matches[e.matches.length-1];return r.route.id||le(!1),r.route.id}function wv(){var t;let e=b.useContext(Rf),r=yv(),n=$f();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function _v(){let{router:t}=gv(If.UseNavigateStable),e=$f(Af.UseNavigateStable),r=b.useRef(!1);return Pf(()=>{r.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ps({fromRouteId:e},i)))},[t,e])}const Ic={};function xv(t,e,r){Ic[t]||(Ic[t]=!0)}function Sv(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function bv(t){let{to:e,replace:r,state:n,relative:s}=t;_n()||le(!1);let{future:i,static:o}=b.useContext(rr),{matches:a}=b.useContext(nr),{pathname:l}=Cr(),c=io(),d=iu(e,su(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return b.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:s}),[c,h,s,r,n]),null}function tt(t){le(!1)}function kv(t){let{basename:e="/",children:r=null,location:n,navigationType:s=zt.Pop,navigator:i,static:o=!1,future:a}=t;_n()&&le(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:ps({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=wn(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:y="default"}=n,w=b.useMemo(()=>{let x=nu(d,l);return x==null?null:{location:{pathname:x,search:h,hash:f,state:m,key:y},navigationType:s}},[l,d,h,f,m,y,s]);return w==null?null:b.createElement(rr.Provider,{value:c},b.createElement(so.Provider,{children:r,value:w}))}function Ac(t){let{children:e,location:r}=t;return uv(Va(e),r)}new Promise(()=>{});function Va(t,e){e===void 0&&(e=[]);let r=[];return b.Children.forEach(t,(n,s)=>{if(!b.isValidElement(n))return;let i=[...e,s];if(n.type===b.Fragment){r.push.apply(r,Va(n.props.children,i));return}n.type!==tt&&le(!1),!n.props.index||!n.props.children||le(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Va(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qa.apply(this,arguments)}function jv(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Ev(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Cv(t,e){return t.button===0&&(!e||e==="_self")&&!Ev(t)}const Tv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ov="6";try{window.__reactRouterVersion=Ov}catch{}const Rv="startTransition",$c=xm[Rv];function Pv(t){let{basename:e,children:r,future:n,window:s}=t,i=b.useRef();i.current==null&&(i.current=Iy({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=b.useCallback(h=>{c&&$c?$c(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>Sv(n),[n]),b.createElement(kv,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const Nv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Iv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Av=b.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=jv(e,Tv),{basename:m}=b.useContext(rr),y,w=!1;if(typeof c=="string"&&Iv.test(c)&&(y=c,Nv))try{let v=new URL(window.location.href),_=c.startsWith("//")?new URL(v.protocol+c):new URL(c),S=nu(_.pathname,m);_.origin===v.origin&&S!=null?c=S+_.search+_.hash:w=!0}catch{}let x=av(c,{relative:s}),p=$v(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function g(v){n&&n(v),v.defaultPrevented||p(v)}return b.createElement("a",qa({},f,{href:y||x,onClick:w||i?n:g,ref:r,target:l}))});var Dc;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Dc||(Dc={}));var Lc;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lc||(Lc={}));function $v(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=io(),c=Cr(),d=Nf(t,{relative:o});return b.useCallback(h=>{if(Cv(h,r)){h.preventDefault();let f=n!==void 0?n:Di(c)===Di(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,n,s,r,t,i,o,a])}var Ha=function(t,e){return Ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Ha(t,e)};function Df(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ha(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Li=function(){return Li=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Li.apply(this,arguments)};function xn(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Lf(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function Uf(t,e){return function(r,n){e(r,n,t)}}function Bf(t,e,r,n,s,i){function o(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,d=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h,f=!1,m=r.length-1;m>=0;m--){var y={};for(var w in n)y[w]=w==="access"?{}:n[w];for(var w in n.access)y.access[w]=n.access[w];y.addInitializer=function(p){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(p||null))};var x=(0,r[m])(a==="accessor"?{get:d.get,set:d.set}:d[l],y);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=o(x.get))&&(d.get=h),(h=o(x.set))&&(d.set=h),(h=o(x.init))&&s.unshift(h)}else(h=o(x))&&(a==="field"?s.unshift(h):d[l]=h)}c&&Object.defineProperty(c,n.name,d),f=!0}function zf(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function Mf(t){return typeof t=="symbol"?t:"".concat(t)}function Ff(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Wf(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function I(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})}function Vf(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var oo=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function qf(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&oo(e,t,r)}function Ui(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function au(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function Hf(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(au(arguments[e]));return t}function Kf(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Gf(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function pn(t){return this instanceof pn?(this.v=t,this):new pn(t)}function Jf(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(m){return function(y){return Promise.resolve(y).then(m,h)}}function a(m,y){n[m]&&(s[m]=function(w){return new Promise(function(x,p){i.push([m,w,x,p])>1||l(m,w)})},y&&(s[m]=y(s[m])))}function l(m,y){try{c(n[m](y))}catch(w){f(i[0][3],w)}}function c(m){m.value instanceof pn?Promise.resolve(m.value.v).then(d,h):f(i[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function f(m,y){m(y),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Qf(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:pn(t[s](o)),done:!1}:i?i(o):o}:i}}function Yf(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Ui=="function"?Ui(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function Xf(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Dv=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Ka=function(t){return Ka=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Ka(t)};function Zf(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Ka(t),n=0;n<r.length;n++)r[n]!=="default"&&oo(e,t,r[n]);return Dv(e,t),e}function ep(t){return t&&t.__esModule?t:{default:t}}function tp(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function rp(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function np(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function sp(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var Lv=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function ip(t){function e(i){t.error=t.hasError?new Lv(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function op(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?e?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):t}const Uv={__extends:Df,__assign:Li,__rest:xn,__decorate:Lf,__param:Uf,__esDecorate:Bf,__runInitializers:zf,__propKey:Mf,__setFunctionName:Ff,__metadata:Wf,__awaiter:I,__generator:Vf,__createBinding:oo,__exportStar:qf,__values:Ui,__read:au,__spread:Hf,__spreadArrays:Kf,__spreadArray:Gf,__await:pn,__asyncGenerator:Jf,__asyncDelegator:Qf,__asyncValues:Yf,__makeTemplateObject:Xf,__importStar:Zf,__importDefault:ep,__classPrivateFieldGet:tp,__classPrivateFieldSet:rp,__classPrivateFieldIn:np,__addDisposableResource:sp,__disposeResources:ip,__rewriteRelativeImportExtension:op},Bv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:sp,get __assign(){return Li},__asyncDelegator:Qf,__asyncGenerator:Jf,__asyncValues:Yf,__await:pn,__awaiter:I,__classPrivateFieldGet:tp,__classPrivateFieldIn:np,__classPrivateFieldSet:rp,__createBinding:oo,__decorate:Lf,__disposeResources:ip,__esDecorate:Bf,__exportStar:qf,__extends:Df,__generator:Vf,__importDefault:ep,__importStar:Zf,__makeTemplateObject:Xf,__metadata:Wf,__param:Uf,__propKey:Mf,__read:au,__rest:xn,__rewriteRelativeImportExtension:op,__runInitializers:zf,__setFunctionName:Ff,__spread:Hf,__spreadArray:Gf,__spreadArrays:Kf,__values:Ui,default:Uv},Symbol.toStringTag,{value:"Module"})),zv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class lu extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Mv extends lu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Uc extends lu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Bc extends lu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ga;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ga||(Ga={}));class Fv{constructor(e,{headers:r={},customFetch:n,region:s=Ga.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=zv(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return I(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:d,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const y=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,y.searchParams.set("forceFunctionRegion",m));let w;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",w=c):typeof c=="string"?(f["Content-Type"]="text/plain",w=c):typeof FormData<"u"&&c instanceof FormData?w=c:(f["Content-Type"]="application/json",w=JSON.stringify(c)):w=c;let x=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(x=o.signal,d.addEventListener("abort",()=>o.abort())):x=o.signal);const p=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:w,signal:x}).catch(S=>{throw new Mv(S)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new Uc(p);if(!p.ok)throw new Bc(p);let v=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return v==="application/json"?_=yield p.json():v==="application/octet-stream"||v==="application/pdf"?_=yield p.blob():v==="text/event-stream"?_=p:v==="multipart/form-data"?_=yield p.formData():_=yield p.text(),{data:_,error:null,response:p}}catch(a){return{data:null,error:a,response:a instanceof Bc||a instanceof Uc?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var Oe={};const Sn=im(Bv);var Vs={},qs={},Hs={},Ks={},Gs={},Js={},zc;function ap(){if(zc)return Js;zc=1,Object.defineProperty(Js,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Js.default=t,Js}var Mc;function lp(){if(Mc)return Gs;Mc=1,Object.defineProperty(Gs,"__esModule",{value:!0});const e=Sn.__importDefault(ap());class r{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,d,h,f;let m=null,y=null,w=null,x=l.status,p=l.statusText;if(l.ok){if(this.method!=="HEAD"){const S=await l.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?y=S:y=JSON.parse(S))}const v=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");v&&_&&_.length>1&&(w=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(m={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,w=null,x=406,p="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const v=await l.text();try{m=JSON.parse(v),Array.isArray(m)&&l.status===404&&(y=[],m=null,x=200,p="OK")}catch{l.status===404&&v===""?(x=204,p="No Content"):m={message:v}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,x=200,p="OK"),m&&this.shouldThrowOnError)throw new e.default(m)}return{error:m,data:y,count:w,status:x,statusText:p}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,d,h,f,m,y;let w="";const x=l==null?void 0:l.cause;if(x){const p=(c=x==null?void 0:x.message)!==null&&c!==void 0?c:"",g=(d=x==null?void 0:x.code)!==null&&d!==void 0?d:"";w=`${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"FetchError"}: ${l==null?void 0:l.message}`,w+=`

Caused by: ${(f=x==null?void 0:x.name)!==null&&f!==void 0?f:"Error"}: ${p}`,g&&(w+=` (${g})`),x!=null&&x.stack&&(w+=`
${x.stack}`)}else w=(m=l==null?void 0:l.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(y=l==null?void 0:l.name)!==null&&y!==void 0?y:"FetchError"}: ${l==null?void 0:l.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(s,i)}returns(){return this}overrideTypes(){return this}}return Gs.default=r,Gs}var Fc;function up(){if(Fc)return Ks;Fc=1,Object.defineProperty(Ks,"__esModule",{value:!0});const e=Sn.__importDefault(lp());class r extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var d;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Ks.default=r,Ks}var Wc;function uu(){if(Wc)return Hs;Wc=1,Object.defineProperty(Hs,"__esModule",{value:!0});const e=Sn.__importDefault(up()),r=new RegExp("[,()]");class n extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return Hs.default=n,Hs}var Vc;function cp(){if(Vc)return qs;Vc=1,Object.defineProperty(qs,"__esModule",{value:!0});const e=Sn.__importDefault(uu());class r{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",d),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return qs.default=r,qs}var qc;function Wv(){if(qc)return Vs;qc=1,Object.defineProperty(Vs,"__esModule",{value:!0});const t=Sn,e=t.__importDefault(cp()),r=t.__importDefault(uu());class n{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var d;let h;const f=new URL(`${this.url}/rpc/${i}`);let m;a||l?(h=a?"HEAD":"GET",Object.entries(o).filter(([w,x])=>x!==void 0).map(([w,x])=>[w,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([w,x])=>{f.searchParams.append(w,x)})):(h="POST",m=o);const y=new Headers(this.headers);return c&&y.set("Prefer",`count=${c}`),new r.default({method:h,url:f,headers:y,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Vs.default=n,Vs}Object.defineProperty(Oe,"__esModule",{value:!0});var dp=Oe.PostgrestError=xp=Oe.PostgrestBuilder=wp=Oe.PostgrestTransformBuilder=yp=Oe.PostgrestFilterBuilder=mp=Oe.PostgrestQueryBuilder=fp=Oe.PostgrestClient=void 0;const bn=Sn,hp=bn.__importDefault(Wv());var fp=Oe.PostgrestClient=hp.default;const pp=bn.__importDefault(cp());var mp=Oe.PostgrestQueryBuilder=pp.default;const gp=bn.__importDefault(uu());var yp=Oe.PostgrestFilterBuilder=gp.default;const vp=bn.__importDefault(up());var wp=Oe.PostgrestTransformBuilder=vp.default;const _p=bn.__importDefault(lp());var xp=Oe.PostgrestBuilder=_p.default;const Sp=bn.__importDefault(ap());dp=Oe.PostgrestError=Sp.default;var bp=Oe.default={PostgrestClient:hp.default,PostgrestQueryBuilder:pp.default,PostgrestFilterBuilder:gp.default,PostgrestTransformBuilder:vp.default,PostgrestBuilder:_p.default,PostgrestError:Sp.default};const Vv=hd({__proto__:null,get PostgrestBuilder(){return xp},get PostgrestClient(){return fp},get PostgrestError(){return dp},get PostgrestFilterBuilder(){return yp},get PostgrestQueryBuilder(){return mp},get PostgrestTransformBuilder(){return wp},default:bp},[Oe]),{PostgrestClient:qv,PostgrestQueryBuilder:A_,PostgrestFilterBuilder:$_,PostgrestTransformBuilder:D_,PostgrestBuilder:L_,PostgrestError:U_}=bp||Vv;class Hv{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Kv="2.86.0",Gv=`realtime-js/${Kv}`,kp="1.0.0",Jv="2.0.0",Hc=kp,Ja=1e4,Qv=1e3,Yv=100;var cr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(cr||(cr={}));var de;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(de||(de={}));var ot;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ot||(ot={}));var Qa;(function(t){t.websocket="websocket"})(Qa||(Qa={}));var dr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(dr||(dr={}));class Xv{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(m),w=0;y.setUint8(w++,this.KINDS.userBroadcastPush),y.setUint8(w++,l.length),y.setUint8(w++,a.length),y.setUint8(w++,o.length),y.setUint8(w++,c.length),y.setUint8(w++,h.length),y.setUint8(w++,r),Array.from(l,p=>y.setUint8(w++,p.charCodeAt(0))),Array.from(a,p=>y.setUint8(w++,p.charCodeAt(0))),Array.from(o,p=>y.setUint8(w++,p.charCodeAt(0))),Array.from(c,p=>y.setUint8(w++,p.charCodeAt(0))),Array.from(h,p=>y.setUint8(w++,p.charCodeAt(0)));var x=new Uint8Array(m.byteLength+n.byteLength);return x.set(new Uint8Array(m),0),x.set(new Uint8Array(n),m.byteLength),x.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,i,o,a,l]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(e.slice(l,l+s));l=l+s;const d=n.decode(e.slice(l,l+i));l=l+i;const h=n.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),m=a===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,y={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class jp{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(J||(J={}));const Kc=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=Zv(o,t,e,s),i),{}):{}},Zv=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?Ep(i,o):Ya(o)},Ep=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return n0(e,r)}switch(t){case J.bool:return e0(e);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return t0(e);case J.json:case J.jsonb:return r0(e);case J.timestamp:return s0(e);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return Ya(e);default:return Ya(e)}},Ya=t=>t,e0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},t0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},r0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},n0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Ep(e,a))}return t},s0=t=>typeof t=="string"?t.replace(" ","T"):t,Cp=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Mo{constructor(e,r,n={},s=Ja){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Gc||(Gc={}));class Gn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Gn.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Gn.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(i,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const f=d.map(x=>x.presence_ref),m=h.map(x=>x.presence_ref),y=d.filter(x=>m.indexOf(x.presence_ref)<0),w=h.filter(x=>f.indexOf(x.presence_ref)<0);y.length>0&&(a[c]=y),w.length>0&&(l[c]=w)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...f)}n(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jc||(Jc={}));var Jn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Jn||(Jn={}));var wt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(wt||(wt={}));class cu{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=de.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Mo(this,ot.join,this.params,this.timeout),this.rejoinTimer=new jp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=de.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=de.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ot.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Gn(this),this.broadcastEndpointURL=Cp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==de.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Jn.PRESENCE]&&this.bindings[Jn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(wt.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(wt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){e==null||e(wt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,x=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,p=[];for(let g=0;g<x;g++){const v=w[g],{filter:{event:_,schema:S,table:j,filter:C}}=v,R=m&&m[g];if(R&&R.event===_&&R.schema===S&&R.table===j&&R.filter===C)p.push(Object.assign(Object.assign({},v),{id:R.id}));else{this.unsubscribe(),this.state=de.errored,e==null||e(wt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(wt.SUBSCRIBED);return}}).receive("error",m=>{this.state=de.errored,e==null||e(wt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(wt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===de.joined&&e===Jn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=de.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ot.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Mo(this,ot.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=de.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Mo(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Yv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=ot;if(n&&[a,l,c,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,w,x;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((x=(w=m.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var y,w,x,p,g,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,S=(y=m.filter)===null||y===void 0?void 0:y.event;return _&&((w=r.ids)===null||w===void 0?void 0:w.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(g=(p=m==null?void 0:m.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:w,table:x,commit_timestamp:p,type:g,errors:v}=y;f=Object.assign(Object.assign({},{schema:w,table:x,commit_timestamp:p,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(y))}m.callback(f,n)})}_isClosed(){return this.state===de.closed}_isJoined(){return this.state===de.joined}_isJoining(){return this.state===de.joining}_isLeaving(){return this.state===de.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&cu.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ot.close,{},e)}_onError(e){this._on(ot.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=de.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Kc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Kc(e.columns,e.old_record)),r}}const Fo=()=>{},Qs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},i0=[1e3,2e3,5e3,1e4],o0=1e4,a0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class l0{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ja,this.transport=null,this.heartbeatIntervalMs=Qs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fo,this.ref=0,this.reconnectTimer=null,this.vsn=Hc,this.logger=Fo,this.conn=null,this.sendBuffer=[],this.serializer=new Xv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Qa.websocket}`,this.httpEndpoint=Cp(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case cr.connecting:return dr.Connecting;case cr.open:return dr.Open;case cr.closing:return dr.Closing;default:return dr.Closed}}isConnected(){return this.connectionState()===dr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new cu(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Qv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Qs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===cr.open||this.conn.readyState===cr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ot.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([a0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Gv};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ot.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new jp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,a,l,c,d,h,f,m;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Ja,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Qs.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Fo,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Hc,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:y=>i0[y-1]||o0,this.vsn){case kp:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(y,w)=>w(JSON.stringify(y)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(y,w)=>w(JSON.parse(y));break;case Jv:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ao extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ee(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class u0 extends ao{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xa extends ao{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const du=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),c0=()=>Response,Za=t=>{if(Array.isArray(t))return t.map(r=>Za(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Za(n)}),e},d0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},h0=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Wo=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},f0=(t,e,r)=>I(void 0,void 0,void 0,function*(){const n=yield c0();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new u0(Wo(s),i,o))}).catch(s=>{e(new Xa(Wo(s),s))}):e(new Xa(Wo(t),t))}),p0=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(d0(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function ks(t,e,r,n,s,i){return I(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,p0(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>f0(l,a,n))})})}function ms(t,e,r,n){return I(this,void 0,void 0,function*(){return ks(t,"GET",e,r,n)})}function st(t,e,r,n,s){return I(this,void 0,void 0,function*(){return ks(t,"POST",e,n,s,r)})}function el(t,e,r,n,s){return I(this,void 0,void 0,function*(){return ks(t,"PUT",e,n,s,r)})}function m0(t,e,r,n){return I(this,void 0,void 0,function*(){return ks(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function hu(t,e,r,n,s){return I(this,void 0,void 0,function*(){return ks(t,"DELETE",e,n,s,r)})}class g0{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return I(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ee(e))return{data:null,error:e};throw e}})}}var Tp;class y0{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Tp]="BlobDownloadBuilder",this.promise=null}asStream(){return new g0(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return I(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ee(e))return{data:null,error:e};throw e}})}}Tp=Symbol.toStringTag;const v0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class w0{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=du(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return I(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Qc),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),h=yield(e=="PUT"?el:st)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ee(i))return{data:null,error:i};throw i}})}upload(e,r,n){return I(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return I(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:Qc.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield el(this.fetch,a.toString(),l,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ee(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return I(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield st(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new ao("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}})}update(e,r,n){return I(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return I(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}copy(e,r,n){return I(this,void 0,void 0,function*(){try{return{data:{path:(yield st(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return I(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield st(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return I(this,void 0,void 0,function*(){try{const s=yield st(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>ms(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new y0(l,this.shouldThrowOnError)}info(e){return I(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield ms(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Za(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}})}exists(e){return I(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield m0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ee(n)&&n instanceof Xa){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return I(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}list(e,r,n){return I(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},v0),r),{prefix:e||""});return{data:yield st(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}listV2(e,r){return I(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield st(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Op="2.86.0",Rp={"X-Client-Info":`storage-js/${Op}`};class _0{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rp),r),this.fetch=du(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return I(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield ms(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}getBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}createBucket(e){return I(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return I(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}})}emptyBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}deleteBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var gs=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function x0(t,e,r){const n=new URL(e,t);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function S0(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function b0(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const a=x0(t.baseUrl,n,s),l=await S0(t.auth),c=await e(a,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!c.ok){const m=h?f:void 0,y=m==null?void 0:m.error;throw new gs((y==null?void 0:y.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:m})}return{status:c.status,headers:c.headers,data:f}}}}function Ys(t){return t.join("")}var k0=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ys(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ys(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ys(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ys(t.namespace)}`}),!0}catch(e){if(e instanceof gs&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof gs&&r.status===409)return;throw r}}};function Ir(t){return t.join("")}var j0=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ir(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ir(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ir(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ir(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ir(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ir(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof gs&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof gs&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},E0=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=b0({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new k0(this.client,e),this.tableOps=new j0(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class C0{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rp),r),this.fetch=du(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}listBuckets(e){return I(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ms(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}deleteBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}from(e){if(!h0(e))throw new ao("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new E0({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>I(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const fu={"X-Client-Info":`storage-js/${Op}`,"Content-Type":"application/json"};class Pp extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ze(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Vo extends Pp{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class T0 extends Pp{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Yc;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Yc||(Yc={}));const pu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),O0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Xc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),R0=(t,e,r)=>I(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new Vo(Xc(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new Vo(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new Vo(a,s,o))}}else e(new T0(Xc(t),t))}),P0=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(O0(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function N0(t,e,r,n,s,i){return I(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,P0(e,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>R0(l,a,n))})})}function Me(t,e,r,n,s){return I(this,void 0,void 0,function*(){return N0(t,"POST",e,n,s,r)})}class I0{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fu),r),this.fetch=pu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return I(this,void 0,void 0,function*(){try{return{data:(yield Me(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}getIndex(e,r){return I(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ze(n))return{data:null,error:n};throw n}})}listIndexes(e){return I(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return I(this,void 0,void 0,function*(){try{return{data:(yield Me(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ze(n))return{data:null,error:n};throw n}})}}class A0{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fu),r),this.fetch=pu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return I(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Me(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}getVectors(e){return I(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}listVectors(e){return I(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Me(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}queryVectors(e){return I(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}deleteVectors(e){return I(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Me(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}}class $0{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fu),r),this.fetch=pu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return I(this,void 0,void 0,function*(){try{return{data:(yield Me(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}getBucket(e){return I(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}listBuckets(){return I(this,arguments,void 0,function*(e={}){try{return{data:yield Me(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}deleteBucket(e){return I(this,void 0,void 0,function*(){try{return{data:(yield Me(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}})}}class D0 extends $0{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new L0(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return I(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return I(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return I(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return I(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class L0 extends I0{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return I(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return I(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return I(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return I(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new U0(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class U0 extends A0{constructor(e,r,n,s,i){super(e,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return I(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return I(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return I(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return I(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return I(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class B0 extends _0{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new w0(this.url,this.headers,e,this.fetch)}get vectors(){return new D0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new C0(this.url+"/iceberg",this.headers,this.fetch)}}const z0="2.86.0";let Un="";typeof Deno<"u"?Un="deno":typeof document<"u"?Un="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Un="react-native":Un="node";const M0={"X-Client-Info":`supabase-js-${Un}/${z0}`},F0={headers:M0},W0={schema:"public"},V0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},q0={},H0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),K0=()=>Headers,G0=(t,e,r)=>{const n=H0(r),s=K0();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))}};function J0(t){return t.endsWith("/")?t:t+"/"}function Q0(t,e){var r,n;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Y0(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(J0(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Np="2.86.0",Br=30*1e3,tl=3,qo=tl*Br,X0="http://localhost:9999",Z0="supabase.auth.token",ew={"X-Client-Info":`gotrue-js/${Np}`},rl="X-Supabase-Api-Version",Ip={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rw=10*60*1e3;class ys extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function D(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class nw extends ys{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function sw(t){return D(t)&&t.name==="AuthApiError"}class hr extends ys{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class sr extends ys{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Ue extends sr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function iw(t){return D(t)&&t.name==="AuthSessionMissingError"}class Ar extends sr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xs extends sr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Zs extends sr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ow(t){return D(t)&&t.name==="AuthImplicitGrantRedirectError"}class Zc extends sr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nl extends sr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Ho(t){return D(t)&&t.name==="AuthRetryableFetchError"}class ed extends sr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class sl extends sr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),td=` 	
\r=`.split(""),aw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<td.length;e+=1)t[td[e].charCodeAt(0)]=-2;for(let e=0;e<Bi.length;e+=1)t[Bi[e].charCodeAt(0)]=e;return t})();function rd(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Bi[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Bi[n]),e.queuedBits-=6}}function Ap(t,e,r){const n=aw[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function nd(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{cw(o,n,r)};for(let o=0;o<t.length;o+=1)Ap(t.charCodeAt(o),s,i);return e.join("")}function lw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function uw(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}lw(n,e)}}function cw(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function on(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Ap(t.charCodeAt(s),r,n);return new Uint8Array(e)}function dw(t){const e=[];return uw(t,r=>e.push(r)),new Uint8Array(e)}function gr(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>rd(s,r,n)),rd(null,r,n),e.join("")}function hw(t){return Math.round(Date.now()/1e3)+t}function fw(){return Symbol("auth-callback")}const ve=()=>typeof window<"u"&&typeof document<"u",ir={tested:!1,writable:!1},$p=()=>{if(!ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ir.tested)return ir.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ir.tested=!0,ir.writable=!0}catch{ir.tested=!0,ir.writable=!1}return ir.writable};function pw(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Dp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",zr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},or=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Nt=async(t,e)=>{await t.removeItem(e)};class lo{constructor(){this.promise=new lo.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}lo.promiseConstructor=Promise;function Ko(t){const e=t.split(".");if(e.length!==3)throw new sl("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!tw.test(e[n]))throw new sl("JWT not in base64url format");return{header:JSON.parse(nd(e[0])),payload:JSON.parse(nd(e[1])),signature:on(e[2]),raw:{header:e[0],payload:e[1]}}}async function gw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function yw(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function vw(t){return("0"+t.toString(16)).substr(-2)}function ww(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,vw).join("")}async function _w(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function xw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await _w(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $r(t,e,r=!1){const n=ww();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await zr(t,`${e}-code-verifier`,s);const i=await xw(n);return[i,n===i?"plain":"s256"]}const Sw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bw(t){const e=t.headers.get(rl);if(!e||!e.match(Sw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function jw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ew=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Dr(t){if(!Ew.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Go(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Cw(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function sd(t){return JSON.parse(JSON.stringify(t))}const ur=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Tw=[502,503,504];async function id(t){var e;if(!mw(t))throw new nl(ur(t),0);if(Tw.includes(t.status))throw new nl(ur(t),t.status);let r;try{r=await t.json()}catch(i){throw new hr(ur(i),i)}let n;const s=bw(t);if(s&&s.getTime()>=Ip["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ed(ur(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ue}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ed(ur(r),t.status,r.weak_password.reasons);throw new nw(ur(r),t.status||500,n)}const Ow=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function L(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[rl]||(i[rl]=Ip["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Rw(t,e,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Rw(t,e,r,n,s,i){const o=Ow(e,n,s,i);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new nl(ur(l),0)}if(a.ok||await id(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await id(l)}}function rt(t){var e;let r=null;Iw(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=hw(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function od(t){const e=rt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Pw(t){return{data:t,error:null}}function Nw(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=xn(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ad(t){return t}function Iw(t){return t.access_token&&t.refresh_token&&t.expires_in}const Jo=["global","local","others"];class Aw{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Dp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Jo[0]){if(Jo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jo.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Lt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=xn(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Nw,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(D(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ad});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);c[`${x}Page`]=w}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(D(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Dr(e);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Dr(e);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Lt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Dr(e);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Lt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Dr(e.userId);try{const{data:r,error:n}=await L(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(D(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Dr(e.userId),Dr(e.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await L(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ad});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);c[`${x}Page`]=w}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(D(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await L(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await L(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(D(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await L(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}}function ld(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Lr={debug:!!(globalThis&&$p()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class $w extends Lp{}async function Dw(t,e,r){Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new $w(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Lr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Lw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Up(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Uw(t){return parseInt(t,16)}function Bw(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function zw(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=Up(t.address),y=d?`${d}://${n}`:n,w=t.statement?`${t.statement}
`:"",x=`${y} wants you to sign in with your Ethereum account:
${m}

${w}`;let p=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(p+=`
Expiration Time: ${s.toISOString()}`),a&&(p+=`
Not Before: ${a.toISOString()}`),l&&(p+=`
Request ID: ${l}`),c){let g=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);g+=`
- ${v}`}p+=g}return`${x}
${p}`}class ue extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class zi extends ue{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Mw({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ue({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ue({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ue({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ue({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ue({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ue({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ue({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ue({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Bp(o)){if(i.rp.id!==o)return new ue({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ue({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ue({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Fw({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ue({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ue({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Bp(n)){if(r.rpId!==n)return new ue({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ue({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Ww{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Vw=new Ww;function qw(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=xn(t,["challenge","user","excludeCredentials"]),i=on(e).buffer,o=Object.assign(Object.assign({},r),{id:on(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:on(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function Hw(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=xn(t,["challenge","allowCredentials"]),s=on(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:on(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Kw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:gr(new Uint8Array(t.response.attestationObject)),clientDataJSON:gr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Gw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:gr(new Uint8Array(s.authenticatorData)),clientDataJSON:gr(new Uint8Array(s.clientDataJSON)),signature:gr(new Uint8Array(s.signature)),userHandle:s.userHandle?gr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Bp(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ud(){var t,e;return!!(ve()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Jw(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new zi("Browser returned unexpected credential type",e)}:{data:null,error:new zi("Empty credential response",e)}}catch(e){return{data:null,error:Mw({error:e,options:t})}}}async function Qw(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new zi("Browser returned unexpected credential type",e)}:{data:null,error:new zi("Empty credential response",e)}}catch(e){return{data:null,error:Fw({error:e,options:t})}}}const Yw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Xw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Mi(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(e(o)){const a=n[i];e(a)?n[i]=Mi(a,o):n[i]=Mi(o)}else n[i]=o}return n}function Zw(t,e){return Mi(Yw,t,e||{})}function e_(t,e){return Mi(Xw,t,e||{})}class t_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:a};const l=s??Vw.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=Zw(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await Jw({publicKey:c,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=e_(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await Qw(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return D(o)?{data:null,error:o}:{data:null,error:new hr("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ys("rpId is required for WebAuthn authentication")};try{if(!ud())return{data:null,error:new hr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return D(o)?{data:null,error:o}:{data:null,error:new hr("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ys("rpId is required for WebAuthn registration")};try{if(!ud())return{data:null,error:new hr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return D(o)?{data:null,error:o}:{data:null,error:new hr("Unexpected error in register",o)}}}}Lw();const r_={url:X0,storageKey:Z0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ew,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function cd(t,e,r){return await r()}const Ur={};class vs{get jwks(){var e,r;return(r=(e=Ur[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ur[this.storageKey]=Object.assign(Object.assign({},Ur[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ur[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ur[this.storageKey]=Object.assign(Object.assign({},Ur[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},r_),e);if(this.storageKey=i.storageKey,this.instanceID=(r=vs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,vs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ve()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Aw({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Dp(i.fetch),this.lock=i.lock||cd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:ve()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Dw:this.lock=cd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new t_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:$p()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ld(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=ld(this.memoryStorage)),ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Np}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(ve()&&(r=pw(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ve()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ow(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return D(r)?this._returnResult({error:r}):this._returnResult({error:new hr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:rt}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(D(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await $r(this.storage,this.storageKey)),i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:y},xform:rt})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:rt})}else throw new Xs("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(D(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:od})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:od})}else throw new Xs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Ar;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,o,a,l,c,d,h,f;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:w,wallet:x,statement:p,options:g}=e;let v;if(ve())if(typeof x=="object")v=x;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")v=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=x}const _=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href),S=await v.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Up(S[0]);let C=(n=g==null?void 0:g.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const z=await v.request({method:"eth_chainId"});C=Uw(z)}const R={domain:_.host,address:j,statement:p,uri:_.href,version:"1",chainId:C,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=zw(R),y=await v.request({method:"personal_sign",params:[Bw(m),j]})}try{const{data:w,error:x}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:rt});if(x)throw x;if(!w||!w.session||!w.user){const p=new Ar;return this._returnResult({data:{user:null,session:null},error:p})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:x})}catch(w){if(D(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var r,n,s,i,o,a,l,c,d,h,f,m;let y,w;if("message"in e)y=e.message,w=e.signature;else{const{chain:x,wallet:p,statement:g,options:v}=e;let _;if(ve())if(typeof p=="object")_=p;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))_=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=p}const S=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const j=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),g?{statement:g}:null));let C;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")C=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)C=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),w=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const j=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=j}}try{const{data:x,error:p}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:gr(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:rt});if(p)throw p;if(!x||!x.session||!x.user){const g=new Ar;return this._returnResult({data:{user:null,session:null},error:g})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:p})}catch(x){if(D(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const r=await or(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:rt});if(await Nt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Ar;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(D(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,a=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rt}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new Ar;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await $r(this.storage,this.storageKey));const{error:h}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Xs("You must provide either an email or phone number.")}catch(a){if(D(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:rt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(D(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await $r(this.storage,this.storageKey));const c=await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Pw});return!((i=c.data)===null||i===void 0)&&i.url&&ve()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(D(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ue;const{error:s}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(D(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await L(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await L(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Xs("You must provide either an email or phone number and a type")}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await or(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<qo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await or(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Go()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Cw(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ue}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Lt})})}catch(r){if(D(r))return iw(r)&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ue;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await $r(this.storage,this.storageKey));const{data:c,error:d}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Lt});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(D(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ue;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Ko(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(D(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ue;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!ve())throw new Zs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Zs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Zc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zc("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Zs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const m=f-d;m*1e3<=Br&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:w,error:x}=await this._getUser(i);if(x)throw x;const p={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:e.type},error:null})}catch(n){if(D(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await or(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(sw(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=fw(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await $r(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(D(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ve()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(D(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:d}=e,h=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:rt}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Ar}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(D(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await yw(async s=>(s>0&&await gw(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ho(i)&&Date.now()+o-n<Br})}catch(n){if(this._debug(r,"error",n),D(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ve()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await or(this.storage,this.storageKey);if(s&&this.userStorage){let o=await or(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await zr(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Go()}else if(s&&!s.user&&!s.user){const o=await or(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Nt(this.storage,this.storageKey+"-user"),await zr(this.storage,this.storageKey,s)):s.user=Go()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<qo;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${qo}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ho(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ue;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new lo;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ue;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),D(i)){const o={data:null,error:i};return Ho(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await zr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=sd(s);await zr(this.storage,this.storageKey,i)}else{const s=sd(r);await zr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Nt(this.storage,this.storageKey),await Nt(this.storage,this.storageKey+"-code-verifier"),await Nt(this.storage,this.storageKey+"-user"),this.userStorage&&await Nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ve()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Br);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Br);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Br}ms, refresh threshold is ${tl} ticks`),s<=tl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Lp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ve()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await $r(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await L(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await L(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Kw(e.webauthn.credential_response):Gw(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:qw(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Hw(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ko(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await L(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ue});const o=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&ve()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(D(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ue});const o=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&ve()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(D(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await L(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(e){if(D(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await L(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ue})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+rw>s)return n;const{data:i,error:o}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Ko(n);r!=null&&r.allowExpired||kw(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=jw(s.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,dw(`${a}.${l}`)))throw new sl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(D(n))return this._returnResult({data:null,error:n});throw n}}}vs.nextInstanceID={};const n_=vs;class s_ extends n_{constructor(e){super(e)}}class i_{constructor(e,r,n){var s,i,o;this.supabaseUrl=e,this.supabaseKey=r;const a=Y0(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:W0,realtime:q0,auth:Object.assign(Object.assign({},V0),{storageKey:l}),global:F0},d=Q0(n??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=G0(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new qv(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new B0(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Fv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:d},h,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new s_({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new l0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const o_=(t,e,r)=>new i_(t,e,r);function a_(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}a_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dd="YOUR_SUPABASE_URL_HERE",l_="YOUR_SUPABASE_ANON_KEY_HERE";let zp=null;if(dd.includes("YOUR_SUPABASE_URL")){const t="ERROR CRTICO: Faltan las llaves de Supabase en Vercel. Revisa Environment Variables.";console.error(t),typeof window<"u"&&alert(t)}else zp=o_(dd,l_);const q=zp;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const r=b.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>b.createElement("svg",{ref:d,...u_,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${c_(t)}`,a].join(" "),...c},[...e.map(([h,f])=>b.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=G("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=G("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=G("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=G("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=G("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=G("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=G("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=G("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=G("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=G("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=G("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=G("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=G("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=G("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=G("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),S_=({children:t})=>{const[e,r]=b.useState(!1),[n,s]=b.useState(""),[i,o]=b.useState(null),[a,l]=b.useState(""),c=Cr(),d=io();b.useEffect(()=>{(async()=>{const{data:{user:y}}=await q.auth.getUser();if(y){s(y.email);const{data:w}=await q.from("employees").select("role, name").eq("user_id",y.id).single();w&&(o(w.role),l(w.name))}})()},[]);const h=async()=>{await q.auth.signOut(),d("/login")},f=[{path:"/",label:"Dashboard",icon:u.jsx(p_,{size:20})},{path:"/services",label:"Servicios",icon:u.jsx(qp,{size:20})},{path:"/customers",label:"Clientes",icon:u.jsx(ol,{size:20})},{path:"/employees",label:"Empleados",icon:u.jsx(ol,{size:20})},{path:"/reports",label:"Reportes",icon:u.jsx(h_,{size:20})}];return i==="admin"&&(f.push({path:"/expenses",label:"Gastos",icon:u.jsx(il,{size:20})}),f.push({path:"/gamification-settings",label:"Gamificacin",icon:u.jsx(yr,{size:20})})),u.jsxs("div",{style:{display:"flex",minHeight:"100vh",backgroundColor:"var(--bg-main)",color:"var(--text-main)"},children:[u.jsx("button",{className:"mobile-menu-btn",onClick:()=>r(!e),style:{position:"fixed",top:"1rem",right:"1rem",zIndex:100,padding:"0.5rem",borderRadius:"0.5rem",backgroundColor:"var(--bg-card)",border:"1px solid var(--border-color)",display:"none"},children:e?u.jsx(al,{size:24}):u.jsx(g_,{size:24})}),u.jsxs("aside",{style:{width:"250px",backgroundColor:"var(--bg-card)",borderRight:"1px solid var(--border-color)",display:"flex",flexDirection:"column",padding:"1.5rem",position:"fixed",height:"100vh",transition:"transform 0.3s ease",zIndex:50},className:`sidebar ${e?"open":""}`,children:[u.jsxs("div",{style:{marginBottom:"2rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1rem"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx("img",{src:"/logo.jpg",alt:"CarWash Logo",style:{width:"120px",height:"120px",borderRadius:"50%",objectFit:"cover",border:"4px solid var(--bg-secondary)"}})}),u.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",textAlign:"center"},children:"Express CarWash"}),u.jsx("button",{onClick:()=>r(!1),className:"mobile-close-btn",style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer",display:"none",position:"absolute",top:"1rem",right:"1rem"},children:u.jsx(al,{size:24})})]}),u.jsx("nav",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.5rem"},children:f.map(m=>{const y=c.pathname===m.path;return u.jsxs(Av,{to:m.path,onClick:()=>r(!1),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"0.5rem",textDecoration:"none",color:y?"white":"var(--text-muted)",backgroundColor:y?"var(--primary)":"transparent",transition:"all 0.2s ease"},children:[m.icon,u.jsx("span",{children:m.label})]},m.path)})}),u.jsxs("div",{style:{marginTop:"auto",paddingTop:"1rem",borderTop:"1px solid var(--border-color)",display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)"},children:u.jsx(Gp,{size:20})}),u.jsxs("div",{style:{overflow:"hidden"},children:[u.jsx("p",{style:{fontSize:"0.85rem",fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a||"Usuario"}),u.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:n,children:n||"Cargando..."})]})]}),u.jsxs("button",{onClick:h,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"var(--danger)",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"background 0.2s"},children:[u.jsx(m_,{size:18}),"Cerrar Sesin"]})]})]}),u.jsx("main",{style:{flex:1,marginLeft:"250px",padding:"2rem",width:"calc(100% - 250px)"},className:"main-content",children:t}),e&&u.jsx("div",{onClick:()=>r(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:40}}),u.jsx("style",{children:`
                @media print {
                    .sidebar, .mobile-menu-btn { display: none !important; }
                    .main-content { margin-left: 0 !important; width: 100% !important; padding: 0 !important; }
                    body { background-color: white !important; }
                }
            `})]})},b_=()=>{const[t,e]=b.useState(""),[r,n]=b.useState(""),[s,i]=b.useState(!1),[o,a]=b.useState(null),l=io(),c=async d=>{d.preventDefault(),i(!0),a(null);try{const{data:h,error:f}=await q.auth.signInWithPassword({email:t,password:r});if(f)throw f;console.log("Usuario logueado:",h),l("/")}catch(h){a(h.message)}finally{i(!1)}};return u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#0f172a",color:"white"},children:u.jsxs("div",{style:{padding:"2rem",backgroundColor:"#1e293b",borderRadius:"1rem",width:"100%",maxWidth:"400px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[u.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"1.5rem",fontWeight:"bold"},children:"Iniciar Sesin"}),o&&u.jsx("div",{style:{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#fca5a5",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.875rem"},children:o}),u.jsxs("form",{onSubmit:c,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#94a3b8"},children:"Email"}),u.jsx("input",{type:"email",value:t,onChange:d=>e(d.target.value),required:!0,style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #334155",backgroundColor:"#0f172a",color:"white"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#94a3b8"},children:"Contrasea"}),u.jsx("input",{type:"password",value:r,onChange:d=>n(d.target.value),required:!0,style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #334155",backgroundColor:"#0f172a",color:"white"}})]}),u.jsx("button",{type:"submit",disabled:s,style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.5rem",fontWeight:"bold",cursor:s?"not-allowed":"pointer",opacity:s?.7:1},children:s?"Cargando...":"Entrar"})]})]})})},_e=(t,e="*")=>{const[r,n]=b.useState([]),[s,i]=b.useState(!0),[o,a]=b.useState(null),l=async()=>{try{i(!0);const{data:f,error:m}=await q.from(t).select(e);if(m)throw m;n(f)}catch(f){a(f.message)}finally{i(!1)}};return b.useEffect(()=>{l()},[t]),{data:r,loading:s,error:o,create:async f=>{try{const{data:m,error:y}=await q.from(t).insert(f).select();if(y)throw y;return n([...r,...m]),m}catch(m){throw a(m.message),m}},update:async(f,m)=>{try{const{data:y,error:w}=await q.from(t).update(m).eq("id",f).select();if(w)throw w;return n(r.map(x=>x.id===f?y[0]:x)),y}catch(y){throw a(y.message),y}},remove:async f=>{try{const{error:m}=await q.from(t).delete().eq("id",f);if(m)throw m;n(r.filter(y=>y.id!==f))}catch(m){throw a(m.message),m}},refresh:l}},k_=({dailyCount:t,dailyTarget:e=10,totalXp:r,isEditable:n=!1,onEditTarget:s})=>{const[i,o]=b.useState([]);b.useEffect(()=>{(async()=>{const{data:m,error:y}=await q.from("gamification_levels").select("*").order("min_xp",{ascending:!0});m&&o(m)})()},[]);const l=(f=>{if(i.length===0)return{level:1,name:"Cargando...",icon:u.jsx(yr,{size:20,color:"#94a3b8"}),color:"#94a3b8",next:null};let m=i[0],y=null,w=1;for(let p=0;p<i.length&&f>=i[p].min_xp;p++)m=i[p],w=p+1,y=i[p+1]||null;if(!m)return{level:1,name:"Novato",icon:u.jsx(yr,{size:20,color:"#94a3b8"}),color:"#94a3b8",next:50};const x={Trophy:u.jsx(yr,{size:20,color:m.color}),Star:u.jsx(Kp,{size:20,color:m.color}),Zap:u.jsx(Jp,{size:20,color:m.color}),Crown:u.jsx(Mp,{size:20,color:m.color}),Medal:u.jsx(Wp,{size:20,color:m.color})};return{level:w,name:m.name,icon:x[m.icon]||u.jsx(yr,{size:20,color:m.color}),color:m.color,min_xp:m.min_xp,next:y?y.min_xp:null,reward:y?y.reward:null}})(r),c=Math.min(t/e*100,100);let d=0;if(l.next){const f=l.next-l.min_xp,m=r-l.min_xp;d=Math.min(m/f*100,100)}else d=100;const h=()=>{if(s){const f=prompt("Ingresa la nueva meta diaria:",e);f&&!isNaN(f)&&s(parseInt(f,10))}};return u.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",background:"linear-gradient(to right, var(--bg-card), rgba(99, 102, 241, 0.05))"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{padding:"0.5rem",borderRadius:"50%",backgroundColor:`rgba(${l.color==="#fbbf24"?"251, 191, 36":"148, 163, 184"}, 0.1)`,border:`2px solid ${l.color}`},children:l.icon}),u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"bold",color:l.color},children:l.name}),u.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:["Nivel ",l.level,"  ",r," XP Total"]})]})]}),u.jsxs("div",{style:{textAlign:"right"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"0.5rem"},children:[u.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:c>=100?"var(--success)":"var(--text-main)"},children:[t,"/",e]}),n&&u.jsx("button",{onClick:h,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)",padding:"0.25rem"},title:"Editar Meta",children:u.jsx(y_,{size:16})})]}),u.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Meta Diaria"})]})]}),u.jsx("div",{style:{width:"100%",height:"12px",backgroundColor:"var(--bg-secondary)",borderRadius:"6px",overflow:"hidden",position:"relative"},children:u.jsx("div",{style:{width:`${c}%`,height:"100%",backgroundColor:c>=100?"var(--success)":"var(--primary)",borderRadius:"6px",transition:"width 0.5s ease-out",boxShadow:"0 0 10px rgba(99, 102, 241, 0.5)"}})}),u.jsxs("div",{style:{marginTop:"0.5rem",display:"flex",justifyContent:"space-between",fontSize:"0.75rem",color:"var(--text-muted)"},children:[u.jsx("span",{children:c>=100?"Meta cumplida! ":"Sigue as!"}),l.next&&u.jsxs("span",{children:["Prximo Nivel: ",l.next-r," autos ms"]})]}),u.jsxs("div",{style:{marginTop:"1rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem",marginBottom:"0.25rem",color:"var(--text-muted)"},children:[u.jsx("span",{children:"Progreso de Nivel"}),u.jsxs("span",{children:[Math.round(d),"%"]})]}),u.jsx("div",{style:{width:"100%",height:"6px",backgroundColor:"var(--bg-secondary)",borderRadius:"3px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${d}%`,height:"100%",backgroundColor:l.color,borderRadius:"3px",transition:"width 0.5s ease-out"}})})]})]})},j_=()=>{const[t,e]=b.useState(null),[r,n]=b.useState(""),[s,i]=b.useState(null),[o,a]=b.useState(null),[l,c]=b.useState("");b.useEffect(()=>{(async()=>{const{data:{user:$}}=await q.auth.getUser();if($){e($.id),n($.email),`${$.id}${$.email}`;let{data:V,error:se}=await q.from("employees").select("*").eq("user_id",$.id).single();se&&(console.error("Error fetching employee:",se),c(se.message+" (Code: "+se.code+")"));const{data:Or,error:kn}=await q.from("transactions").select(`
    *,
    transaction_assignments(
        employee_id
    )
        `).order("date",{ascending:!1});if(kn)throw kn;if(!V&&$.email){const{data:jn}=await q.from("employees").select("*").eq("email",$.email).is("user_id",null).single();if(jn){const{error:ho}=await q.from("employees").update({user_id:$.id}).eq("id",jn.id);ho||(V={...jn,user_id:$.id},console.log("Cuenta vinculada automticamente por email:",$.email))}}V&&(a(V.role),i(V.id))}})()},[]);const{data:d}=_e("services"),{data:h}=_e("employees"),{data:f,refresh:m}=_e("customers"),{data:y,create:w,remove:x,refresh:p}=_e("transactions",`
        *,
        transaction_assignments (
            employee_id
        )
    `),{data:g}=_e("expenses"),[v,_]=b.useState(!1),[S,j]=b.useState({customerId:"",serviceId:"",employeeId:"",selectedEmployees:[],price:"",commissionAmount:"",tipAmount:"",paymentMethod:"cash",serviceTime:new Date().toTimeString().slice(0,5),extras:[]}),[C,R]=b.useState({description:"",price:""}),[z,B]=b.useState(!1),[W,Ce]=b.useState({name:"",phone:"",vehicle_plate:"",vehicle_model:"",email:""}),{create:dt}=_e("customers"),Tr=async()=>{if(!W.name||!W.vehicle_plate){alert("Nombre y Placa son obligatorios");return}try{const[E]=await dt(W);E&&(await m(),j({...S,customerId:E.id}),B(!1),Ce({name:"",phone:"",vehicle_plate:"",vehicle_model:"",email:""}))}catch(E){alert("Error al crear cliente: "+E.message)}},Ot=E=>E?new Date(E).toLocaleDateString("en-CA",{timeZone:"America/Puerto_Rico"}):"",yt=Ot(new Date),Ze=y.filter(E=>Ot(E.date)===yt),P=g.filter(E=>Ot(E.date)===yt&&E.category==="lunch"),U=Ze.filter(E=>{var se;const $=(se=E.transaction_assignments)==null?void 0:se.some(Or=>Or.employee_id===s),V=E.employee_id===s;return $||V}),k=o==="admin"?Ze:U,O=Ze.reduce((E,$)=>E+(parseFloat($.total_price)||0),0),A=k.reduce((E,$)=>{const V=(parseFloat($.commission_amount)||0)+(parseFloat($.tip_amount)||0),se=$.transaction_assignments&&$.transaction_assignments.length>0?$.transaction_assignments.length:1,Or=V/se;return E+Or},0),pe=P.reduce((E,$)=>o==="admin"||$.employee_id===s?E+(parseFloat($.amount)||0):E,0),ye=A-pe,K=U.length,[oe,Rt]=b.useState(0),[uo,js]=b.useState(10);b.useEffect(()=>{(async()=>{const{data:$}=await q.from("settings").select("value").eq("key","daily_target").single();if($&&js(parseInt($.value,10)||10),s){const{count:V,error:se}=await q.from("transaction_assignments").select("*",{count:"exact",head:!0}).eq("employee_id",s);se||Rt(V||0)}})()},[s,y]);const Es=async E=>{if(o!=="admin")return;const{error:$}=await q.from("settings").upsert({key:"daily_target",value:E.toString()});$?alert("Error al actualizar la meta: "+$.message):js(E)},co=E=>{const $=E.target.value,V=d.find(se=>se.id===$);j(V?{...S,serviceId:$,price:V.price,commissionAmount:V.commission||0}:{...S,serviceId:"",price:"",commissionAmount:""})},Qp=()=>{C.description&&C.price&&(j({...S,extras:[...S.extras,{...C,price:parseFloat(C.price)}]}),R({description:"",price:""}))},Yp=E=>{const $=[...S.extras];$.splice(E,1),j({...S,extras:$})},Xp=async E=>{E.preventDefault();const $=parseFloat(S.price)||0,V=S.extras.reduce((Pr,fo)=>Pr+fo.price,0),se=parseFloat(S.tipAmount)||0,Or=$+V+se,kn=new Date,[jn,ho]=S.serviceTime.split(":");kn.setHours(jn,ho,0,0);let Rr=[];o==="admin"?(Rr=S.selectedEmployees,Rr.length===0&&(Rr=[s])):Rr=[s];const yu=Rr[0];if(!yu){alert("Error: No se ha podido identificar al empleado. Por favor recarga la pgina.");return}const rm={date:kn.toISOString(),customer_id:S.customerId,service_id:S.serviceId,employee_id:yu,price:$,commission_amount:parseFloat(S.commissionAmount),tip_amount:se,payment_method:S.paymentMethod,extras:S.extras,total_price:Or};try{const[Pr]=await w(rm);if(Pr){const fo=Rr.map(nm=>({transaction_id:Pr.id,employee_id:nm})),{error:vu}=await q.from("transaction_assignments").insert(fo);vu&&console.error("Error asignando empleados:",vu),await p()}_(!1),j({customerId:"",serviceId:"",employeeId:"",selectedEmployees:[],price:"",commissionAmount:"",tipAmount:"",paymentMethod:"cash",serviceTime:new Date().toTimeString().slice(0,5),extras:[]})}catch(Pr){alert("Error al registrar venta: "+Pr.message)}},Zp=E=>{var $;return(($=f.find(V=>V.id===E))==null?void 0:$.name)||"Cliente Casual"},em=E=>{var $;return(($=d.find(V=>V.id===E))==null?void 0:$.name)||"Servicio Desconocido"},gu=E=>{var $;return(($=h.find(V=>V.id===E))==null?void 0:$.name)||"Desconocido"},tm=E=>{switch(E){case"cash":return"Efectivo";case"card":return"Tarjeta";case"transfer":return"AthMvil";default:return E}};return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[u.jsxs("div",{children:[u.jsxs("h1",{style:{fontSize:"1.875rem",marginBottom:"0.5rem"},children:["Dashboard ",u.jsx("span",{style:{fontSize:"1rem",color:"var(--text-muted)",opacity:.7},children:"v2.2"})]}),u.jsxs("p",{style:{color:"var(--text-muted)"},children:["Resumen de operaciones del da: ",yt]})]}),u.jsxs("button",{className:"btn btn-primary",onClick:()=>_(!0),children:[u.jsx(Qt,{size:20}),"Registrar Servicio"]})]}),u.jsx(k_,{dailyCount:K,dailyTarget:uo,totalXp:oe,isEditable:o==="admin",onEditTarget:Es}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"label",children:o==="admin"?"Autos Lavados Hoy":"Mis Autos Lavados"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx(mu,{size:32,className:"text-primary"}),u.jsx("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--primary)"},children:k.length})]})]}),o==="admin"&&u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"label",children:"Ingresos Totales Hoy"}),u.jsxs("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--success)"},children:["$",O.toFixed(2)]}),u.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"(Incluye extras y propinas)"})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"label",children:o==="admin"?"Comisiones Netas":"Mi Neto (Menos Almuerzos)"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsxs("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--warning)"},children:["$",ye.toFixed(2)]}),pe>0&&u.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--danger)",backgroundColor:"rgba(239, 68, 68, 0.1)",padding:"0.25rem 0.5rem",borderRadius:"0.5rem"},children:["-$",pe.toFixed(2)," en almuerzos"]})]})]})]}),v&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,overflowY:"auto"},children:u.jsxs("div",{className:"card modal-card",style:{width:"100%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto"},children:[u.jsx("h3",{style:{marginBottom:"1.5rem"},children:"Registrar Nuevo Servicio (PRUEBA)"}),u.jsxs("form",{onSubmit:Xp,children:[u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Cliente"}),z?u.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},children:[u.jsx("h4",{style:{marginBottom:"0.5rem",color:"var(--text-primary)"},children:"Nuevo Cliente Rpido"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginBottom:"0.5rem"},children:[u.jsx("input",{type:"text",className:"input",placeholder:"Nombre",value:W.name,onChange:E=>Ce({...W,name:E.target.value})}),u.jsx("input",{type:"text",className:"input",placeholder:"Telfono",value:W.phone,onChange:E=>Ce({...W,phone:E.target.value})}),u.jsx("input",{type:"text",className:"input",placeholder:"Placa",value:W.vehicle_plate,onChange:E=>Ce({...W,vehicle_plate:E.target.value})}),u.jsx("input",{type:"text",className:"input",placeholder:"Modelo (Opcional)",value:W.vehicle_model,onChange:E=>Ce({...W,vehicle_model:E.target.value})})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[u.jsx("button",{type:"button",className:"btn",onClick:()=>B(!1),style:{fontSize:"0.8rem",padding:"0.25rem 0.5rem"},children:"Cancelar"}),u.jsx("button",{type:"button",className:"btn btn-primary",onClick:Tr,disabled:!W.name||!W.vehicle_plate,style:{fontSize:"0.8rem",padding:"0.25rem 0.5rem"},children:"Guardar Cliente"})]})]}):u.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[u.jsxs("select",{className:"input",required:!0,value:S.customerId,onChange:E=>j({...S,customerId:E.target.value}),style:{flex:1},children:[u.jsx("option",{value:"",children:"Seleccionar Cliente..."}),f.map(E=>u.jsxs("option",{value:E.id,children:[E.name," - ",E.vehicle_plate]},E.id))]}),u.jsxs("button",{type:"button",className:"btn",onClick:()=>B(!0),title:"Nuevo Cliente",style:{backgroundColor:"red",color:"white",flexShrink:0,minWidth:"80px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:[u.jsx(Qt,{size:20})," NUEVO"]})]})]})}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Servicio Principal"}),u.jsxs("select",{className:"input",required:!0,value:S.serviceId,onChange:co,children:[u.jsx("option",{value:"",children:"Seleccionar Servicio..."}),d.map(E=>u.jsxs("option",{value:E.id,children:[E.name," - $",E.price]},E.id))]})]}),o==="admin"&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Realizado por (Seleccin Mltiple)"}),u.jsxs("div",{style:{maxHeight:"150px",overflowY:"auto",border:"1px solid var(--border-color)",borderRadius:"var(--radius-md)",padding:"0.5rem",backgroundColor:"var(--bg-card)"},children:[u.jsx("div",{style:{marginBottom:"0.5rem"},children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:S.selectedEmployees.includes(s),onChange:E=>{const $=E.target.checked?[...S.selectedEmployees,s]:S.selectedEmployees.filter(V=>V!==s);j({...S,selectedEmployees:$})}}),u.jsx("span",{children:"Yo (Admin)"})]})}),h.filter(E=>E.role!=="admin").map(E=>u.jsx("div",{style:{marginBottom:"0.5rem"},children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:S.selectedEmployees.includes(E.id),onChange:$=>{const V=$.target.checked?[...S.selectedEmployees,E.id]:S.selectedEmployees.filter(se=>se!==E.id);j({...S,selectedEmployees:V})}}),u.jsx("span",{children:E.name})]})},E.id))]}),u.jsx("small",{style:{color:"var(--text-muted)"},children:"Selecciona todos los que participaron."})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Hora del Servicio"}),u.jsx("input",{type:"time",className:"input",required:!0,value:S.serviceTime,onChange:E=>j({...S,serviceTime:E.target.value})})]}),u.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"0.5rem"},children:[u.jsx("label",{className:"label",style:{marginBottom:"0.5rem",display:"block"},children:"Servicios Adicionales (Extras)"}),S.extras.map((E,$)=>u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",fontSize:"0.9rem"},children:[u.jsx("span",{children:E.description}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsxs("span",{children:["$",E.price.toFixed(2)]}),u.jsx("button",{type:"button",onClick:()=>Yp($),style:{color:"var(--danger)",background:"none",border:"none",cursor:"pointer"},children:u.jsx(mn,{size:16})})]})]},$)),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[u.jsx("input",{type:"text",className:"input",placeholder:"Descripcin (ej. Aspirado)",value:C.description,onChange:E=>R({...C,description:E.target.value}),style:{flex:2}}),u.jsx("input",{type:"number",className:"input",placeholder:"Precio",value:C.price,onChange:E=>R({...C,price:E.target.value}),style:{flex:1}}),u.jsx("button",{type:"button",className:"btn btn-primary",onClick:Qp,children:u.jsx(Qt,{size:16})})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Propina"}),u.jsx("input",{type:"number",className:"input",value:S.tipAmount,onChange:E=>j({...S,tipAmount:E.target.value})})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Mtodo de Pago"}),u.jsxs("select",{className:"input",value:S.paymentMethod,onChange:E=>j({...S,paymentMethod:E.target.value}),children:[u.jsx("option",{value:"cash",children:"Efectivo"}),u.jsx("option",{value:"card",children:"Tarjeta"}),u.jsx("option",{value:"transfer",children:"AthMvil"})]})]})]}),u.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[u.jsx("button",{type:"button",className:"btn",onClick:()=>_(!1),style:{backgroundColor:"var(--bg-secondary)",color:"white"},children:"Cancelar"}),u.jsx("button",{type:"submit",className:"btn btn-primary",children:"Registrar Venta"})]})]})]})}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"label",style:{marginBottom:"1rem"},children:"Historial de Hoy"}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-color)"},children:[u.jsx("th",{style:{padding:"1rem"},children:"Hora"}),u.jsx("th",{style:{padding:"1rem"},children:"Cliente"}),u.jsx("th",{style:{padding:"1rem"},children:"Servicio"}),u.jsx("th",{style:{padding:"1rem"},children:"Empleado"}),u.jsx("th",{style:{padding:"1rem"},children:"Total"}),u.jsx("th",{style:{padding:"1rem"},children:"Pago"}),u.jsx("th",{style:{padding:"1rem"},children:"Comisin"}),u.jsx("th",{style:{padding:"1rem"},children:"Propina"})]})}),u.jsxs("tbody",{children:[k.map(E=>{var $,V;return u.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[u.jsx("td",{style:{padding:"1rem"},children:new Date(E.date).toLocaleTimeString("es-PR",{timeZone:"America/Puerto_Rico",hour:"2-digit",minute:"2-digit"})}),u.jsx("td",{style:{padding:"1rem"},children:Zp(E.customer_id)}),u.jsxs("td",{style:{padding:"1rem"},children:[em(E.service_id),E.extras&&E.extras.length>0&&u.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)",display:"block"},children:["+ ",E.extras.length," extras"]})]}),u.jsx("td",{style:{padding:"1rem"},children:E.transaction_assignments&&E.transaction_assignments.length>0?E.transaction_assignments.map(se=>gu(se.employee_id)).join(", "):gu(E.employee_id)}),u.jsxs("td",{style:{padding:"1rem",fontWeight:"bold"},children:["$",E.total_price.toFixed(2)]}),u.jsx("td",{style:{padding:"1rem"},children:u.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.875rem",backgroundColor:"rgba(16, 185, 129, 0.1)",color:"#10B981"},children:tm(E.payment_method)})}),u.jsxs("td",{style:{padding:"1rem",color:"var(--success)"},children:["$",((parseFloat(E.commission_amount)||0)/((($=E.transaction_assignments)==null?void 0:$.length)||1)).toFixed(2)]}),u.jsxs("td",{style:{padding:"1rem",color:"var(--warning)"},children:["$",((parseFloat(E.tip_amount)||0)/(((V=E.transaction_assignments)==null?void 0:V.length)||1)).toFixed(2)]}),o==="admin"&&u.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:u.jsx("button",{className:"btn",style:{padding:"0.5rem",color:"var(--danger)",backgroundColor:"transparent"},onClick:async()=>{if(window.confirm("Ests seguro de que quieres eliminar esta venta? Esta accin no se puede deshacer."))try{await x(E.id)}catch(se){alert("Error al eliminar: "+se.message)}},children:u.jsx(mn,{size:18})})})]},E.id)}),k.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:o==="admin"?"9":"8",style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No hay ventas registradas hoy"})})]})]})})]}),u.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#1e293b",borderRadius:"0.5rem",fontSize:"0.8rem",color:"#94a3b8"},children:[u.jsx("h4",{style:{marginBottom:"0.5rem",color:"white"},children:" Panel de Diagnstico (Solo visible durante pruebas)"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Email (Auth):"})," ",r||"Cargando..."]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Mi ID (Auth):"})," ",t||"No detectado"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Mi ID (Empleado):"})," ",s||" NO VINCULADO"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Rol:"})," ",o||"Sin rol"]}),u.jsxs("p",{style:{color:"red"},children:[u.jsx("strong",{children:"Error:"})," ",l||"Ninguno"]})]}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Total Ventas (Raw):"})," ",y.length]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Ventas Hoy (Filtro Fecha):"})," ",Ze.length]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Mis Ventas (Filtro ID):"})," ",U.length]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Fecha Hoy (App):"})," ",yt]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Ej. Fecha Venta:"})," ",y[0]?Ot(y[0].date):"N/A"]})]})]}),u.jsx("p",{style:{marginTop:"0.5rem"},children:u.jsx("em",{children:'Si "Mi ID (Empleado)" dice "NO VINCULADO", contacta al administrador para que vincule tu email.'})})]})]})},E_=()=>{const{data:t,create:e,remove:r,update:n}=_e("services"),[s,i]=b.useState(!1),[o,a]=b.useState(null),[l,c]=b.useState(null);b.useEffect(()=>{(async()=>{const{data:{user:x}}=await q.auth.getUser();if(x){const{data:p}=await q.from("employees").select("role").eq("user_id",x.id).single();p&&a(p.role)}})()},[]);const[d,h]=b.useState({name:"",price:"",commission:""}),f=(w=null)=>{w?(c(w),h({name:w.name,price:w.price,commission:w.commission||""})):(c(null),h({name:"",price:"",commission:""})),i(!0)},m=async w=>{w.preventDefault();try{const x={...d,commission_rate:0};l?await n(l.id,x):await e(x),i(!1)}catch(x){alert("Error al guardar servicio: "+x.message)}},y=async w=>{window.confirm("Ests seguro de eliminar este servicio?")&&await r(w)};return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"1.875rem",marginBottom:"0.5rem"},children:"Servicios"}),u.jsx("p",{style:{color:"var(--text-muted)"},children:"Catlogo de precios y comisiones"})]}),o==="admin"&&u.jsxs("button",{className:"btn btn-primary",onClick:()=>f(),children:[u.jsx(Qt,{size:20})," Nuevo Servicio"]})]}),u.jsx("div",{className:"card",children:u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-color)"},children:[u.jsx("th",{style:{padding:"1rem"},children:"Nombre"}),u.jsx("th",{style:{padding:"1rem"},children:"Precio"}),u.jsx("th",{style:{padding:"1rem"},children:"Comisin"}),o==="admin"&&u.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Acciones"})]})}),u.jsxs("tbody",{children:[t.map(w=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[u.jsx("td",{style:{padding:"1rem",fontWeight:"bold"},children:w.name}),u.jsxs("td",{style:{padding:"1rem"},children:["$",w.price]}),u.jsxs("td",{style:{padding:"1rem"},children:["$",w.commission]}),o==="admin"&&u.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:[u.jsx("button",{onClick:()=>f(w),style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer",marginRight:"1rem"},children:u.jsx(Hp,{size:18})}),u.jsx("button",{onClick:()=>y(w.id),style:{background:"none",border:"none",color:"var(--danger)",cursor:"pointer"},children:u.jsx(mn,{size:18})})]})]},w.id)),t.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"4",style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No hay servicios registrados."})})]})]})})}),s&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:u.jsxs("div",{className:"card modal-card",style:{width:"100%",maxWidth:"400px"},children:[u.jsx("h3",{style:{marginBottom:"1.5rem"},children:l?"Editar Servicio":"Nuevo Servicio"}),u.jsxs("form",{onSubmit:m,children:[u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Nombre del Servicio"}),u.jsx("input",{type:"text",className:"input",required:!0,value:d.name,onChange:w=>h({...d,name:w.target.value})})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Precio ($)"}),u.jsx("input",{type:"number",className:"input",required:!0,value:d.price,onChange:w=>h({...d,price:w.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Comisin Fija ($)"}),u.jsx("input",{type:"number",step:"0.01",className:"input",required:!0,value:d.commission,onChange:w=>h({...d,commission:w.target.value})})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[u.jsx("button",{type:"button",className:"btn",onClick:()=>i(!1),style:{backgroundColor:"var(--bg-secondary)",color:"white"},children:"Cancelar"}),u.jsx("button",{type:"submit",className:"btn btn-primary",children:l?"Actualizar":"Guardar"})]})]})]})})]})},C_=()=>{const{data:t,create:e,remove:r}=_e("employees"),[n,s]=b.useState(!1),[i,o]=b.useState(null);b.useEffect(()=>{(async()=>{const{data:{user:f}}=await q.auth.getUser();if(f){const{data:m}=await q.from("employees").select("role").eq("user_id",f.id).single();m&&o(m.role)}})()},[]);const[a,l]=b.useState({name:"",position:"Lavador",phone:"",email:"",user_id:""}),c=async h=>{h.preventDefault();try{const f={...a,user_id:a.user_id.trim()===""?null:a.user_id};await e(f),s(!1),l({name:"",position:"Lavador",phone:"",email:"",user_id:""})}catch(f){alert("Error al crear empleado: "+f.message)}},d=async h=>{window.confirm("Ests seguro de eliminar este empleado?")&&await r(h)};return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"1.875rem",marginBottom:"0.5rem"},children:"Empleados"}),u.jsx("p",{style:{color:"var(--text-muted)"},children:"Gestiona tu equipo de trabajo"})]}),i==="admin"&&u.jsxs("button",{className:"btn btn-primary",onClick:()=>s(!0),children:[u.jsx(Qt,{size:20}),"Nuevo Empleado"]})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.5rem"},children:t.map(h=>u.jsxs("div",{className:"card",style:{position:"relative"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"rgba(99, 102, 241, 0.1)",color:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Gp,{size:24})}),u.jsxs("div",{children:[u.jsx("h3",{style:{fontWeight:"bold"},children:h.name}),u.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-muted)",backgroundColor:"rgba(255,255,255,0.05)",padding:"0.2rem 0.5rem",borderRadius:"4px"},children:h.position})]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",fontSize:"0.9rem",color:"var(--text-muted)"},children:[h.phone&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Vp,{size:16})," ",h.phone]}),h.email&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Fp,{size:16})," ",h.email]}),h.user_id&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--success)"},children:[u.jsx(w_,{size:16})," Cuenta Vinculada"]})]}),i==="admin"&&u.jsx("button",{onClick:()=>d(h.id),style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",color:"var(--danger)",cursor:"pointer",opacity:.7},children:u.jsx(mn,{size:18})})]},h.id))}),n&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:u.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"500px"},children:[u.jsx("h3",{style:{marginBottom:"1.5rem"},children:"Registrar Empleado"}),u.jsxs("form",{onSubmit:c,children:[u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Nombre Completo"}),u.jsx("input",{type:"text",className:"input",required:!0,value:a.name,onChange:h=>l({...a,name:h.target.value})})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Cargo"}),u.jsxs("select",{className:"input",value:a.position,onChange:h=>l({...a,position:h.target.value}),children:[u.jsx("option",{value:"Lavador",children:"Lavador"}),u.jsx("option",{value:"Cajero",children:"Cajero"}),u.jsx("option",{value:"Gerente",children:"Gerente"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Telfono"}),u.jsx("input",{type:"tel",className:"input",value:a.phone,onChange:h=>l({...a,phone:h.target.value})})]})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Email (Contacto)"}),u.jsx("input",{type:"email",className:"input",value:a.email,onChange:h=>l({...a,email:h.target.value})})]}),u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"rgba(99, 102, 241, 0.1)",borderRadius:"8px",border:"1px solid var(--primary)"},children:[u.jsx("label",{className:"label",style:{color:"var(--primary)"},children:"Vincular Usuario (Importante)"}),u.jsx("p",{style:{fontSize:"0.8rem",marginBottom:"0.5rem",color:"var(--text-muted)"},children:'Crea el usuario en Supabase (Authentication), copia su "User UID" y pgalo aqu.'}),u.jsx("input",{type:"text",className:"input",placeholder:"Ej: a1b2c3d4-...",value:a.user_id,onChange:h=>l({...a,user_id:h.target.value}),style:{fontFamily:"monospace"}})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[u.jsx("button",{type:"button",className:"btn",onClick:()=>s(!1),style:{backgroundColor:"var(--bg-secondary)",color:"white"},children:"Cancelar"}),u.jsx("button",{type:"submit",className:"btn btn-primary",children:"Guardar Empleado"})]})]})]})})]})},T_=()=>{const{data:t,create:e,remove:r,update:n}=_e("customers"),[s,i]=b.useState(!1),[o,a]=b.useState(null),[l,c]=b.useState(null),[d,h]=b.useState(""),[f,m]=b.useState({});b.useEffect(()=>{const _=async()=>{const{data:{user:j}}=await q.auth.getUser();if(j){const{data:C}=await q.from("employees").select("role").eq("user_id",j.id).single();C&&a(C.role)}},S=async()=>{const{data:j}=await q.from("transactions").select("customer_id");if(j){const C={};j.forEach(R=>{R.customer_id&&(C[R.customer_id]=(C[R.customer_id]||0)+1)}),m(C)}};_(),S()},[]);const[y,w]=b.useState({name:"",phone:"",email:"",vehicle_plate:"",vehicle_model:""}),x=(_=null)=>{_?(c(_),w({name:_.name,phone:_.phone||"",email:_.email||"",vehicle_plate:_.vehicle_plate||"",vehicle_model:_.vehicle_model||""})):(c(null),w({name:"",phone:"",email:"",vehicle_plate:"",vehicle_model:""})),i(!0)},p=async _=>{_.preventDefault();try{const S={...y,email:y.email.trim()===""?null:y.email.trim()};l?await n(l.id,S):await e(S),i(!1)}catch(S){alert("Error al guardar cliente: "+S.message)}},g=async _=>{window.confirm("Ests seguro de eliminar este cliente?")&&await r(_)},v=t.filter(_=>_.name.toLowerCase().includes(d.toLowerCase())||_.vehicle_plate&&_.vehicle_plate.toLowerCase().includes(d.toLowerCase())||_.phone&&_.phone.includes(d));return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"1.875rem",marginBottom:"0.5rem"},children:"Clientes"}),u.jsx("p",{style:{color:"var(--text-muted)"},children:"Directorio de clientes y vehculos"})]}),o==="admin"&&u.jsxs("button",{className:"btn btn-primary",onClick:()=>x(),children:[u.jsx(Qt,{size:20}),"Nuevo Cliente"]})]}),u.jsxs("div",{style:{position:"relative",maxWidth:"400px"},children:[u.jsx(v_,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),u.jsx("input",{type:"text",placeholder:"Buscar por nombre, tablilla o telfono...",className:"input",style:{paddingLeft:"3rem",width:"100%",backgroundColor:"var(--bg-card)",color:"white",border:"1px solid var(--border-color)",borderRadius:"var(--radius-md)",paddingTop:"0.75rem",paddingBottom:"0.75rem"},value:d,onChange:_=>h(_.target.value)})]})]}),u.jsx("div",{className:"card",children:u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-color)"},children:[u.jsx("th",{style:{padding:"1rem"},children:"Nombre"}),u.jsx("th",{style:{padding:"1rem"},children:"Visitas"}),u.jsx("th",{style:{padding:"1rem"},children:"Contacto"}),u.jsx("th",{style:{padding:"1rem"},children:"Vehculo"}),o==="admin"&&u.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Acciones"})]})}),u.jsxs("tbody",{children:[v.map(_=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[u.jsx("td",{style:{padding:"1rem",fontWeight:"bold"},children:_.name}),u.jsx("td",{style:{padding:"1rem"},children:u.jsx("span",{style:{backgroundColor:"rgba(99, 102, 241, 0.1)",color:"var(--primary)",padding:"0.25rem 0.75rem",borderRadius:"1rem",fontWeight:"bold",fontSize:"0.9rem"},children:f[_.id]||0})}),u.jsx("td",{style:{padding:"1rem"},children:u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",fontSize:"0.9rem"},children:[_.phone&&u.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Vp,{size:14})," ",_.phone]}),_.email&&u.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)"},children:[u.jsx(Fp,{size:14})," ",_.email]})]})}),u.jsx("td",{style:{padding:"1rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(mu,{size:16,className:"text-primary"}),u.jsx("span",{children:_.vehicle_model}),u.jsx("span",{style:{backgroundColor:"var(--bg-secondary)",padding:"0.1rem 0.4rem",borderRadius:"4px",fontSize:"0.8rem"},children:_.vehicle_plate})]})}),o==="admin"&&u.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:[u.jsx("button",{onClick:()=>x(_),style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer",marginRight:"1rem"},children:u.jsx(Hp,{size:18})}),u.jsx("button",{onClick:()=>g(_.id),style:{background:"none",border:"none",color:"var(--danger)",cursor:"pointer"},children:u.jsx(mn,{size:18})})]})]},_.id)),v.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"5",style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:d?"No se encontraron clientes.":"No hay clientes registrados."})})]})]})})}),s&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:u.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"500px"},children:[u.jsx("h3",{style:{marginBottom:"1.5rem"},children:l?"Editar Cliente":"Nuevo Cliente"}),u.jsxs("form",{onSubmit:p,children:[u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Nombre Completo"}),u.jsx("input",{type:"text",className:"input",required:!0,value:y.name,onChange:_=>w({...y,name:_.target.value})})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Telfono"}),u.jsx("input",{type:"tel",className:"input",value:y.phone,onChange:_=>w({...y,phone:_.target.value})})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"label",children:["Email ",u.jsx("span",{style:{fontWeight:"normal",color:"var(--text-muted)",fontSize:"0.8rem"},children:"(Opcional)"})]}),u.jsx("input",{type:"email",className:"input",value:y.email,onChange:_=>w({...y,email:_.target.value})})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Modelo Vehculo"}),u.jsx("input",{type:"text",className:"input",placeholder:"Ej. Toyota Corolla",value:y.vehicle_model,onChange:_=>w({...y,vehicle_model:_.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Tablilla (Placa)"}),u.jsx("input",{type:"text",className:"input",placeholder:"ABC-123",value:y.vehicle_plate,onChange:_=>w({...y,vehicle_plate:_.target.value})})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[u.jsx("button",{type:"button",className:"btn",onClick:()=>i(!1),style:{backgroundColor:"var(--bg-secondary)",color:"white"},children:"Cancelar"}),u.jsx("button",{type:"submit",className:"btn btn-primary",children:l?"Actualizar":"Guardar"})]})]})]})})]})},O_=()=>{const[t,e]=b.useState("week"),[r,n]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(null),[l,c]=b.useState(null),[d,h]=b.useState(null);b.useEffect(()=>{(async()=>{const{data:{user:O}}=await q.auth.getUser();if(O){a(O.id);const{data:A}=await q.from("employees").select("*").eq("user_id",O.id).single();A&&(h(A.role),c(A.id))}})()},[]);const{data:f}=_e("transactions",`
        *,
        transaction_assignments (
            employee_id
        )
    `),{data:m}=_e("expenses"),{data:y}=_e("customers"),{data:w}=_e("services"),{data:x}=_e("employees"),p=k=>{var O;return((O=y.find(A=>A.id===k))==null?void 0:O.name)||"Cliente Casual"},g=k=>{var O;return((O=w.find(A=>A.id===k))==null?void 0:O.name)||"Servicio Desconocido"},v=k=>{var O;return((O=x.find(A=>A.id===k))==null?void 0:O.name)||"Desconocido"},_=k=>k?new Date(k).toLocaleDateString("en-CA",{timeZone:"America/Puerto_Rico"}):"",S=()=>{if(!f)return[];const k=new Date;let O=new Date,A=new Date;if(t!=="today"){if(t==="week"){const K=k.getDay(),oe=k.getDate()-K+(K===0?-6:1);O.setDate(oe),A.setDate(O.getDate()+6)}else if(t==="month")O=new Date(k.getFullYear(),k.getMonth(),1),A=new Date(k.getFullYear(),k.getMonth()+1,0);else if(t==="custom"){if(!r||!s)return[];O=new Date(r),A=new Date(s)}}const pe=_(O),ye=_(A);return f.filter(K=>{var Es;const oe=_(K.date);if(!(oe>=pe&&oe<=ye))return!1;if(d==="admin")return!0;const uo=(Es=K.transaction_assignments)==null?void 0:Es.some(co=>co.employee_id===l),js=K.employee_id===l;return uo||js})},j=()=>{if(!m)return[];const k=new Date;let O=new Date,A=new Date;if(t!=="today"){if(t==="week"){const K=k.getDay(),oe=k.getDate()-K+(K===0?-6:1);O.setDate(oe),A.setDate(O.getDate()+6)}else if(t==="month")O=new Date(k.getFullYear(),k.getMonth(),1),A=new Date(k.getFullYear(),k.getMonth()+1,0);else if(t==="custom"){if(!r||!s)return[];O=new Date(r),A=new Date(s)}}const pe=_(O),ye=_(A);return m.filter(K=>{const oe=_(K.date);return oe>=pe&&oe<=ye?d==="admin"?!0:K.category==="lunch"&&K.employee_id===l:!1})},C=S(),R=j(),z=C.length,B=C.reduce((k,O)=>k+(parseFloat(O.total_price)||0),0),W=C.reduce((k,O)=>{const A=(parseFloat(O.commission_amount)||0)+(parseFloat(O.tip_amount)||0),pe=O.transaction_assignments&&O.transaction_assignments.length>0?O.transaction_assignments.length:1;return d==="admin"?k+A:k+A/pe},0),Ce=R.filter(k=>k.category==="lunch").reduce((k,O)=>k+(parseFloat(O.amount)||0),0),dt=R.filter(k=>k.category==="product").reduce((k,O)=>k+(parseFloat(O.amount)||0),0),Tr=W-Ce,Ot=B-W-dt,Ze=(()=>{const k={};return C.forEach(O=>{const A=_(O.date);k[A]||(k[A]={date:A,count:0,income:0,expenses:0});const pe=parseFloat(O.total_price)||0,ye=(parseFloat(O.commission_amount)||0)+(parseFloat(O.tip_amount)||0);k[A].count+=1,k[A].income+=pe,k[A].expenses+=ye}),d==="admin"&&R.forEach(O=>{if(O.category==="product"){const A=_(O.date);k[A]||(k[A]={date:A,count:0,income:0,expenses:0}),k[A].expenses+=parseFloat(O.amount)||0}}),Object.values(k).sort((O,A)=>new Date(A.date)-new Date(O.date))})(),P=()=>{const k=`
            <div style="font-family: Arial, sans-serif; color: #333; max-width: 800px; margin: 0 auto;">
                <div style="text-align: center; padding: 20px; border-bottom: 2px solid #2563eb; margin-bottom: 20px;">
                    <h1 style="margin: 0; color: #1e40af; font-size: 24px;">CARWASH SAAS</h1>
                    <p style="margin: 5px 0; color: #6b7280;">Reporte de Operaciones</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <p><strong>Periodo:</strong> ${t}</p>
                    <p><strong>Generado:</strong> ${new Date().toLocaleDateString("es-PR")}</p>
                </div>

                <table border="1" cellpadding="12" cellspacing="0" style="border-collapse: collapse; width: 100%; border: 1px solid #e5e7eb;">
                    <thead style="background-color: #f8fafc;">
                        <tr>
                            <th style="text-align: left; border: 1px solid #e5e7eb; padding: 12px;">Fecha</th>
                            <th style="text-align: center; border: 1px solid #e5e7eb; padding: 12px;">Autos</th>
                            <th style="text-align: right; color: #10b981; border: 1px solid #e5e7eb; padding: 12px;">Ingreso</th>
                            <th style="text-align: right; color: #ef4444; border: 1px solid #e5e7eb; padding: 12px;">Gastos</th>
                            <th style="text-align: right; border: 1px solid #e5e7eb; padding: 12px;">Neto</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${Ze.map(K=>{const oe=K.income-K.expenses;return`
                                <tr>
                                    <td style="border: 1px solid #e5e7eb; padding: 12px;">${K.date}</td>
                                    <td style="text-align: center; border: 1px solid #e5e7eb; padding: 12px;">${K.count}</td>
                                    <td style="text-align: right; border: 1px solid #e5e7eb; padding: 12px;">$${K.income.toFixed(2)}</td>
                                    <td style="text-align: right; border: 1px solid #e5e7eb; padding: 12px;">$${K.expenses.toFixed(2)}</td>
                                    <td style="text-align: right; font-weight: bold; border: 1px solid #e5e7eb; padding: 12px;">$${oe.toFixed(2)}</td>
                                </tr>
                            `}).join("")}
                    </tbody>
                    <tfoot style="background-color: #f8fafc; font-weight: bold;">
                        <tr>
                            <td style="border: 1px solid #e5e7eb; padding: 12px;">TOTALES</td>
                            <td style="text-align: center; border: 1px solid #e5e7eb; padding: 12px;">${z}</td>
                            <td style="text-align: right; color: #10b981; border: 1px solid #e5e7eb; padding: 12px;">$${B.toFixed(2)}</td>
                            <td style="text-align: right; color: #ef4444; border: 1px solid #e5e7eb; padding: 12px;">$${W.toFixed(2)}</td>
                            <td style="text-align: right; border: 1px solid #e5e7eb; padding: 12px;">$${(B-W).toFixed(2)}</td>
                        </tr>
                    </tfoot>
                </table>
                
                <div style="margin-top: 30px; text-align: center; font-size: 12px; color: #9ca3af;">
                    <p>Generado automticamente por CarWash SaaS</p>
                </div>
            </div>
        `,O=new Blob([k],{type:"text/html"}),A=`REPORTE CARWASH - ${t}
Autos: ${z}
Neto: $${(B-W).toFixed(2)}`,pe=new Blob([A],{type:"text/plain"}),ye=new ClipboardItem({"text/html":O,"text/plain":pe});navigator.clipboard.write([ye]).then(()=>{alert("Tabla copiada con formato. Pgala en tu email!")}).catch(K=>{console.error("Error al copiar:",K),alert("Tu navegador no soporta copiado avanzado. Se copiar solo texto."),navigator.clipboard.writeText(A)})},U=()=>{window.print()};return u.jsxs("div",{className:"reports-container",children:[u.jsx("style",{children:`
                @media print {
                    .no-print { display: none !important; }
                    .card { box-shadow: none; border: 1px solid #ddd; page-break-inside: avoid; }
                    body { background: white; color: black; }
                    .print-header { display: block !important; margin-bottom: 2rem; text-align: center; }
                    /* Hide other cards if we only want the table, but user asked for "report". 
                       Usually we keep the summary cards. */
                }
                .print-header { display: none; }
            `}),u.jsxs("div",{className:"print-header",children:[u.jsx("img",{src:"/logo.jpg",alt:"CarWash Logo",style:{width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",marginBottom:"1rem"}}),u.jsx("h1",{style:{fontSize:"2rem",margin:0},children:"Express CarWash"}),u.jsxs("p",{style:{color:"#666"},children:["Reporte de Operaciones: ",t]})]}),u.jsxs("div",{className:"no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"1.875rem",marginBottom:"0.5rem"},children:"Reportes"}),u.jsx("p",{style:{color:"var(--text-muted)"},children:"Historial y estadsticas"})]}),u.jsxs("div",{className:"no-print",style:{display:"flex",gap:"1rem"},children:[u.jsx("button",{className:"btn",onClick:P,style:{backgroundColor:"var(--bg-secondary)",color:"white"},children:"Copiar para Email"}),u.jsx("button",{className:"btn btn-primary",onClick:U,children:"Imprimir / PDF"})]})]}),u.jsx("div",{className:"card no-print",style:{marginBottom:"2rem"},children:u.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(f_,{size:20,color:"var(--text-muted)"}),u.jsx("span",{style:{fontWeight:"bold"},children:"Periodo:"})]}),u.jsxs("select",{className:"input",style:{width:"auto"},value:t,onChange:k=>e(k.target.value),children:[u.jsx("option",{value:"today",children:"Hoy"}),u.jsx("option",{value:"week",children:"Esta Semana"}),u.jsx("option",{value:"month",children:"Este Mes"}),u.jsx("option",{value:"custom",children:"Personalizado"})]}),t==="custom"&&u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"date",className:"input",style:{width:"auto"},value:r,onChange:k=>n(k.target.value)}),u.jsx("span",{style:{color:"var(--text-muted)"},children:"a"}),u.jsx("input",{type:"date",className:"input",style:{width:"auto"},value:s,onChange:k=>i(k.target.value)})]})]})}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"label",children:"Total Autos"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx(mu,{size:32,className:"text-primary"}),u.jsx("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--primary)"},children:z})]})]}),d==="admin"&&u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"label",children:"Ingresos Totales"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx(il,{size:32,className:"text-success"}),u.jsxs("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--success)"},children:["$",B.toFixed(2)]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"label",children:d==="admin"?"Gastos (Comisiones + Compras)":"Mi Neto (Menos Almuerzos)"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx(ol,{size:32,className:"text-warning"}),u.jsxs("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--warning)"},children:["$",d==="admin"?(W+dt).toFixed(2):Tr.toFixed(2)]})]}),d!=="admin"&&Ce>0&&u.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--danger)",marginTop:"0.5rem"},children:["-$",Ce.toFixed(2)," en almuerzos"]})]}),d==="admin"&&u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"label",children:"Ganancia Neta"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx(il,{size:32,className:"text-success"}),u.jsxs("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--success)"},children:["$",Ot.toFixed(2)]})]})]})]}),d==="admin"&&u.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[u.jsx("h3",{className:"label",style:{marginBottom:"1rem"},children:"Desglose Financiero"}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-color)"},children:[u.jsx("th",{style:{padding:"1rem"},children:"Fecha"}),u.jsx("th",{style:{padding:"1rem"},children:"Autos"}),u.jsx("th",{style:{padding:"1rem",color:"var(--success)"},children:"Ingresos (+)"}),u.jsx("th",{style:{padding:"1rem",color:"var(--danger)"},children:"Gastos (-)"}),u.jsx("th",{style:{padding:"1rem"},children:"Neto (=)"})]})}),u.jsx("tbody",{children:Ze.map(k=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[u.jsx("td",{style:{padding:"1rem"},children:k.date}),u.jsx("td",{style:{padding:"1rem"},children:k.count}),u.jsxs("td",{style:{padding:"1rem",color:"var(--success)"},children:["$",k.income.toFixed(2)]}),u.jsxs("td",{style:{padding:"1rem",color:"var(--danger)"},children:["$",k.expenses.toFixed(2)]}),u.jsxs("td",{style:{padding:"1rem",fontWeight:"bold"},children:["$",(k.income-k.expenses).toFixed(2)]})]},k.date))})]})})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"label",style:{marginBottom:"1rem"},children:"Detalle de Operaciones"}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-color)"},children:[u.jsx("th",{style:{padding:"1rem"},children:"Fecha"}),u.jsx("th",{style:{padding:"1rem"},children:"Cliente"}),u.jsx("th",{style:{padding:"1rem"},children:"Servicio"}),u.jsx("th",{style:{padding:"1rem"},children:"Empleados"}),u.jsx("th",{style:{padding:"1rem"},children:"Total"})]})}),u.jsxs("tbody",{children:[C.map(k=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[u.jsxs("td",{style:{padding:"1rem"},children:[new Date(k.date).toLocaleDateString("es-PR")," ",u.jsx("br",{}),u.jsx("small",{style:{color:"var(--text-muted)"},children:new Date(k.date).toLocaleTimeString("es-PR",{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("td",{style:{padding:"1rem"},children:p(k.customer_id)}),u.jsxs("td",{style:{padding:"1rem"},children:[g(k.service_id),k.extras&&k.extras.length>0&&u.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)",display:"block"},children:["+ ",k.extras.length," extras"]})]}),u.jsx("td",{style:{padding:"1rem"},children:k.transaction_assignments&&k.transaction_assignments.length>0?k.transaction_assignments.map(O=>v(O.employee_id)).join(", "):v(k.employee_id)}),u.jsxs("td",{style:{padding:"1rem",fontWeight:"bold"},children:["$",k.total_price.toFixed(2)]})]},k.id)),C.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"5",style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No hay datos para este periodo"})})]})]})})]})]})},R_=()=>{const[t,e]=b.useState("product"),{data:r,create:n,remove:s}=_e("expenses"),{data:i}=_e("employees"),[o,a]=b.useState({description:"",amount:"",employeeId:"",date:new Date().toISOString().split("T")[0]}),l=async h=>{if(h.preventDefault(),t==="lunch"&&!o.employeeId){alert("Debes seleccionar un empleado para el almuerzo.");return}const f={description:t==="lunch"?"Almuerzo":o.description,amount:parseFloat(o.amount),category:t,employee_id:t==="lunch"?o.employeeId:null,date:new Date().toISOString()};try{await n(f),a({...o,description:"",amount:"",employeeId:""}),alert("Gasto registrado correctamente")}catch(m){alert("Error al registrar gasto: "+m.message)}},c=h=>{var f;return((f=i.find(m=>m.id===h))==null?void 0:f.name)||"Desconocido"},d=r.filter(h=>h.category===t).sort((h,f)=>new Date(f.date)-new Date(h.date));return u.jsxs("div",{children:[u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("h1",{style:{fontSize:"1.875rem",marginBottom:"0.5rem"},children:"Control de Gastos"}),u.jsx("p",{style:{color:"var(--text-muted)"},children:"Registra compras y almuerzos"})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("button",{className:`btn ${t==="product"?"btn-primary":""}`,onClick:()=>e("product"),style:{flex:1,justifyContent:"center",backgroundColor:t==="product"?"var(--primary)":"var(--bg-card)",color:t==="product"?"white":"var(--text-main)"},children:[u.jsx(qp,{size:20}),"Compras"]}),u.jsxs("button",{className:`btn ${t==="lunch"?"btn-primary":""}`,onClick:()=>e("lunch"),style:{flex:1,justifyContent:"center",backgroundColor:t==="lunch"?"var(--primary)":"var(--bg-card)",color:t==="lunch"?"white":"var(--text-main)"},children:[u.jsx(x_,{size:20}),"Almuerzos"]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"2rem"},children:[u.jsxs("div",{className:"card",style:{height:"fit-content"},children:[u.jsx("h3",{className:"label",style:{marginBottom:"1rem"},children:t==="product"?"Registrar Compra":"Registrar Almuerzo"}),u.jsxs("form",{onSubmit:l,children:[t==="product"&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Descripcin"}),u.jsx("input",{type:"text",className:"input",placeholder:"Ej. Jabn, Cera, Paos...",required:!0,value:o.description,onChange:h=>a({...o,description:h.target.value})})]}),t==="lunch"&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Empleado"}),u.jsxs("select",{className:"input",required:!0,value:o.employeeId,onChange:h=>a({...o,employeeId:h.target.value}),children:[u.jsx("option",{value:"",children:"Seleccionar Empleado..."}),i.map(h=>u.jsx("option",{value:h.id,children:h.name},h.id))]})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Monto ($)"}),u.jsx("input",{type:"number",step:"0.01",className:"input",placeholder:"0.00",required:!0,value:o.amount,onChange:h=>a({...o,amount:h.target.value})})]}),u.jsxs("button",{type:"submit",className:"btn btn-primary",style:{width:"100%"},children:[u.jsx(Qt,{size:20}),"Registrar"]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"label",style:{marginBottom:"1rem"},children:"Historial Reciente"}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-color)"},children:[u.jsx("th",{style:{padding:"1rem"},children:"Fecha"}),u.jsx("th",{style:{padding:"1rem"},children:"Descripcin"}),u.jsx("th",{style:{padding:"1rem"},children:"Monto"}),u.jsx("th",{style:{padding:"1rem"},children:"Accin"})]})}),u.jsxs("tbody",{children:[d.map(h=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[u.jsx("td",{style:{padding:"1rem"},children:new Date(h.date).toLocaleDateString("es-PR")}),u.jsx("td",{style:{padding:"1rem"},children:t==="lunch"?`Almuerzo - ${c(h.employee_id)}`:h.description}),u.jsxs("td",{style:{padding:"1rem",fontWeight:"bold",color:"var(--danger)"},children:["-$",h.amount.toFixed(2)]}),u.jsx("td",{style:{padding:"1rem"},children:u.jsx("button",{onClick:async()=>{window.confirm("Borrar este gasto?")&&await s(h.id)},style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:u.jsx(mn,{size:18})})})]},h.id)),d.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"4",style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No hay registros recientes."})})]})]})})]})]})]})},P_=()=>{const{data:t,create:e,update:r,remove:n}=_e("gamification_levels","*"),[s,i]=b.useState(null),[o,a]=b.useState(!1),[l,c]=b.useState({name:"",min_xp:"",color:"#94a3b8",icon:"Trophy",reward:""}),d=[...t||[]].sort((p,g)=>p.min_xp-g.min_xp),h=p=>{i(p),c({name:p.name,min_xp:p.min_xp,color:p.color,icon:p.icon,reward:p.reward||""}),a(!0)},f=()=>{i(null),c({name:"",min_xp:"",color:"#94a3b8",icon:"Trophy",reward:""}),a(!0)},m=async p=>{p.preventDefault();try{const g={name:l.name,min_xp:parseInt(l.min_xp),color:l.color,icon:l.icon,reward:l.reward||null};s?await r(s.id,g):await e(g),a(!1)}catch(g){alert("Error al guardar: "+g.message)}},y=async p=>{if(window.confirm("Ests seguro de eliminar este nivel?"))try{await n(p)}catch(g){alert("Error al eliminar: "+g.message)}},w=[{value:"Trophy",icon:u.jsx(yr,{size:20})},{value:"Star",icon:u.jsx(Kp,{size:20})},{value:"Zap",icon:u.jsx(Jp,{size:20})},{value:"Crown",icon:u.jsx(Mp,{size:20})},{value:"Medal",icon:u.jsx(Wp,{size:20})}],x=p=>{const g=w.find(v=>v.value===p);return g?g.icon:u.jsx(yr,{size:20})};return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"1.875rem",marginBottom:"0.5rem"},children:"Configuracin de Gamificacin"}),u.jsx("p",{style:{color:"var(--text-muted)"},children:"Administra los niveles, XP y premios."})]}),u.jsxs("button",{className:"btn btn-primary",onClick:f,children:[u.jsx(Qt,{size:20}),"Nuevo Nivel"]})]}),u.jsx("div",{className:"card",children:u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-color)"},children:[u.jsx("th",{style:{padding:"1rem"},children:"Icono"}),u.jsx("th",{style:{padding:"1rem"},children:"Nivel"}),u.jsx("th",{style:{padding:"1rem"},children:"XP Mnima"}),u.jsx("th",{style:{padding:"1rem"},children:"Color"}),u.jsx("th",{style:{padding:"1rem"},children:"Premio"}),u.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Acciones"})]})}),u.jsx("tbody",{children:d.map(p=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[u.jsx("td",{style:{padding:"1rem"},children:u.jsx("div",{style:{color:p.color},children:x(p.icon)})}),u.jsx("td",{style:{padding:"1rem",fontWeight:"bold"},children:p.name}),u.jsxs("td",{style:{padding:"1rem"},children:[p.min_xp," XP"]}),u.jsx("td",{style:{padding:"1rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"4px",backgroundColor:p.color}}),u.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:p.color})]})}),u.jsx("td",{style:{padding:"1rem"},children:p.reward?u.jsx("span",{style:{backgroundColor:"rgba(251, 191, 36, 0.1)",color:"#d97706",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.9rem"},children:p.reward}):u.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),u.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[u.jsx("button",{className:"btn",onClick:()=>h(p),style:{padding:"0.5rem",color:"var(--primary)",backgroundColor:"transparent"},children:u.jsx(d_,{size:18})}),u.jsx("button",{className:"btn",onClick:()=>y(p.id),style:{padding:"0.5rem",color:"var(--danger)",backgroundColor:"transparent"},children:u.jsx(__,{size:18})})]})})]},p.id))})]})})}),o&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:u.jsxs("div",{className:"card modal-card",style:{width:"100%",maxWidth:"500px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[u.jsx("h3",{children:s?"Editar Nivel":"Nuevo Nivel"}),u.jsx("button",{onClick:()=>a(!1),style:{background:"none",border:"none",cursor:"pointer"},children:u.jsx(al,{size:24})})]}),u.jsxs("form",{onSubmit:m,children:[u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"Nombre del Nivel"}),u.jsx("input",{type:"text",className:"input",required:!0,value:l.name,onChange:p=>c({...l,name:p.target.value}),placeholder:"Ej. Maestro"})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"label",children:"XP Mnima (Autos Lavados)"}),u.jsx("input",{type:"number",className:"input",required:!0,value:l.min_xp,onChange:p=>c({...l,min_xp:p.target.value}),placeholder:"Ej. 500"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Color"}),u.jsx("input",{type:"color",className:"input",style:{height:"42px",padding:"0.25rem"},value:l.color,onChange:p=>c({...l,color:p.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Icono"}),u.jsx("select",{className:"input",value:l.icon,onChange:p=>c({...l,icon:p.target.value}),children:w.map(p=>u.jsx("option",{value:p.value,children:p.value},p.value))})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("label",{className:"label",children:"Premio (Opcional)"}),u.jsx("input",{type:"text",className:"input",value:l.reward,onChange:p=>c({...l,reward:p.target.value}),placeholder:"Ej. Bono $50"})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[u.jsx("button",{type:"button",className:"btn",onClick:()=>a(!1),style:{backgroundColor:"var(--bg-secondary)",color:"white"},children:"Cancelar"}),u.jsx("button",{type:"submit",className:"btn btn-primary",children:"Guardar"})]})]})]})})]})},N_=({children:t})=>{const[e,r]=b.useState(null),[n,s]=b.useState(!0),[i,o]=b.useState(null),a=Cr();return b.useEffect(()=>{const l=setTimeout(()=>{n&&(s(!1),o("Tiempo de espera agotado conectando a Supabase. Verifica tu conexin o configuracin."))},5e3);q.auth.getSession().then(({data:{session:d},error:h})=>{h&&(console.error("Error getting session:",h),o(h.message)),r(d),s(!1),clearTimeout(l)}).catch(d=>{console.error("Critical Auth Error:",d),o(d.message||"Error desconocido al iniciar sesin"),s(!1),clearTimeout(l)});const{data:{subscription:c}}=q.auth.onAuthStateChange((d,h)=>{r(h)});return()=>{c.unsubscribe(),clearTimeout(l)}},[]),n?u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#0f172a",color:"white"},children:"Cargando... (Esperando a Supabase)"}):i?u.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#0f172a",color:"red",padding:"20px",textAlign:"center"},children:[u.jsx("h2",{children:"Error de Conexin"}),u.jsx("p",{children:i}),u.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px"},children:"Reintentar"})]}):e?t:u.jsx(bv,{to:"/login",state:{from:a},replace:!0})};function I_(){return u.jsxs(Ac,{children:[u.jsx(tt,{path:"/login",element:u.jsx(b_,{})}),u.jsx(tt,{path:"*",element:u.jsx(N_,{children:u.jsx(S_,{children:u.jsxs(Ac,{children:[u.jsx(tt,{path:"/",element:u.jsx(j_,{})}),u.jsx(tt,{path:"/services",element:u.jsx(E_,{})}),u.jsx(tt,{path:"/employees",element:u.jsx(C_,{})}),u.jsx(tt,{path:"/customers",element:u.jsx(T_,{})}),u.jsx(tt,{path:"/reports",element:u.jsx(O_,{})}),u.jsx(tt,{path:"/expenses",element:u.jsx(R_,{})}),u.jsx(tt,{path:"/gamification-settings",element:u.jsx(P_,{})}),u.jsx(tt,{path:"/settings",element:u.jsx("div",{children:"Configuracin (Prximamente)"})})]})})})})]})}Qo.createRoot(document.getElementById("app")).render(u.jsx(bd.StrictMode,{children:u.jsx(Pv,{children:u.jsx(I_,{})})}));
